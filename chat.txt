Fluid Frameworkと svelteを使ったアプリを作りたい。 Fluid FrameworkのサーバーはローカルでRouterliciousを使う。 dockerコンテナ内で作業したいから、 .devcontainerを作りたい。

この情報だけ十分なら設定ファイルを作成して。

不十分なら何が不十分か教えて。

最新のAPIドキュメントを確認しながら作業して。
代替方法の提案をするとき、コードは出力しないで。
拡張機能のバグだと思うが、最初の候補のコードが表示されなくなる。


https://www.npmjs.com/package/fluid-framework
https://fluidframework.com/docs/start/tree-start
https://learn.microsoft.com/en-us/azure/azure-fluid-relay/how-tos/connect-fluid-azure-service





e2e testの実行して、エラーの解消をして。
cd /workspace/client && npm run test:e2e:xvfb
で実行できる。


/workspace/client/logs/browser.log
で記録されているエラーに対処して。



http://192.168.50.13:7080/
はテスト用のサーバー




テストの動作確認をして下さい。

cd /workspace/client && npx playwright test {test file path}
にて、テストを実行できます。

対象のテスト
　/workspace/client/e2e/core/CLM-0001.spec.ts

手順
　以下の手順に過不足があれば実行前に手順の改善案を出して下さい。
　コマンドラインから、このテストをheadlessモードで実行して下さい。
　エラーがなければそれで終了です。
　エラーがある場合は続けて下さい。
　このテストファイルを分析して、各テストケースの目的と確認すべき挙動を確認してください
　playwright-mcpを使用して、headedブラウザでテスト環境（http://192.168.50.13:7080/）にアクセスしてください
　テストコードをトレースして、実際にブラウザで手動でテストコードの内容を行って下さい。
　期待通りに動作するか確認してください。
　異常があれば原因の説明をしてください。
　修正内容方針の説明をして、実際の修正は適用しないで下さい。
　テストレポートの表示はしないで下さい。
　テストの修正をするか、コードの修正をするかは私が決めます。

テスト用のサーバー
　http://192.168.50.13:7080/
クライアントのログがここにあります。必要であれば、アクセス後にこちらを確認して下さい。
　/workspace/client/logs/test-browser.log
テスト用のSveltKit serverのログがここにあります。必要であれば、アクセス後にこちらを確認して下さい。
　/workspace/server/logs/test-svelte-kit.log
API serverのログがここにあります。必要であれば、アクセス後にこちらを確認して下さい。
　/workspace/server/logs/test-log-service-tee.log




今回のテスト確認対象は



開発用のサーバー
http://192.168.50.13:7070/
へアクセスして、正常に動作していることを確認して。
クライアントのログがここにある。必要であれば、アクセス後にこちらを確認して。
/workspace/client/logs/browser.log
開発用のSveltKit serverのログがここにある。必要であれば、アクセス後にこちらを確認して。
/workspace/server/logs/svelte-kit.log
API serverのログがここにある。必要であれば、アクセス後にこちらを確認して。
/workspace/server/logs/log-service-tee.log



以下の手順に過不足があれば実行前に手順の改善案を出して下さい。

テストコード内のコメント充実化してください。
　テストファイルの先頭や各テストケースの前に「@description」や「@check」などのアノテーションを追加し、確認すべき挙動を詳細に記述して下さい。
　既存のテストコードはタイトルと実施内容に整合が取れていない物を含みます。
　その場合は適切な粒度でテストの分割、テストコードの修正、テストタイトルの修正を行って下さい。
　　実装が正しければテスト名を変更してください。
　　テスト名が表している意図が不足していれば、コードを追加・修正してください。
　後にこのコメントを活用して、あなたにテスト確認を行っていただきます。
　テストマニフェストの作成
　　以下のようなテストマニフェスト形式でテストケースの説明を先に作成してください。

/**
 * @file advanced-indent.spec.ts
 * @description インデント操作のテスト
 * 
 * @testcase インデント増加時の階層変更
 * @check Tabキーでインデント増加すると、アイテムが親アイテムの子になることを確認
 * 
 * @testcase インデント減少時の階層変更
 * @check Shift+Tabキーでインデント減少すると、アイテムが親の兄弟になることを確認
 */

全てのテストコードは git管理されているため、異常があれば元のファイルを復元可能です。



cd /workspace/client && npm run test:e2e:xvfb
で実行して、確認して。

先ほどの
カーソルの表示がされなくなった。
コピーペーストが動かなくなった。
を解決して。

これの確認のテストが不足していたら追加して。


Problems
cd /workspace/client && npm run check
を実行して、エラー又は警告を一つ修正して。


cd /workspace/client && npm run test:unit
を実行して、修正して。
リンターエラーは下記で確認してから直して。
cd /workspace/client && npm run check


commit
.venv\Scripts\Activate.ps1
を実行後、
git --no-pager diff --staged -- . ':(exclude).specstory' ':(exclude)chat.txt' ':(exclude)tips.txt' ':(exclude)docs'
で変更点を確認して、コミットメッセージを英語で書いて、コミットして下さい。
if there are not staged files, ignore them.




document.querySelectorAll('.cursor')


ありがとうございます。

セッションが長くなってきたので、セッションを新しくします。

次のセッションであなたが続きの作業をスムーズに行えるように、最初に書くプロンプトを作成して下さい。
次のセッションではまだ解決しきれないとしても、現状で認識している課題点を引き継いでください。
このセッションで行った内容を書く事よりも、次のセッションでの作業を効果的にするためのプロンプトを作成してください。
このセッションで行った内容はgitのコメントの方へ別途記載します。

順次作業を進めるようにとプロンプトに記載して下さい。





次の機能の実装をお願いします。





各テストファイルを一つずつ修正し、修正後は必ずテストを実行して確認してください。
作業の最後に、次のセッションであなたが続きの作業をスムーズに行えるように、最初に書くプロンプトを作成して下さい。
次のセッションではまだ解決しきれないとしても、現状で認識している課題点を引き継いでください。
このセッションで行った内容を書く事よりも、次のセッションでの作業を効果的にするためのプロンプトを作成してください。
このセッションで行った内容はgitのコメントの方へ別途記載します。

順次作業を進めるようにとプロンプトに記載して下さい。

次のテストの修正又は実装の修正をお願いします。
既に多くのテストはパスしているため、テスト環境は正常です。


origin/main
の
/workspace/scripts/get-pr.sh
を実行して、GitHubのOpen PRを確認して下さい。
古いPRから順に処理して下さい。

コンフリクトがある場合はチェックアウトして下さい。
ブランチの名前はそのままにしてください。pr-xxx等の別名にするとPRで追跡できなくなります。
コンフリクトを確認し、注意深く重複が不整合が無いように、手動でコンフリクトを解消して下さい。
docs/feature-map.md, client/coverage/ はgitから削除(git rm -f)して下さい。 
package-lock.json がコンフリクトしている場合は削除して再作成して下さい。
チェックアウトしたブランチへコミットして、プッシュして下さい。
プッシュ後に、GitHub Actionでテストが行われるので、マージはしないで下さい。
次のPRへ進んで下さい。

ciがFAILUREの場合はチェックアウトして下さい。
ブランチの名前はそのままにしてください。pr-xxx等の別名にするとPRで追跡できなくなります。
origin/mainからPRのブランチへマージしてして下さい。
テストのエラーが起きたファイルを GitHubのログから特定してください。
特定されたテストのエラーが解消されるように、テストまたは実装を修正して下さい。 
e2eテストの実行は時間を短縮するため、特定されたテストを実行してください。
このPRの前はテストが全て通っていました。テストが失敗する原因は今回のPRの変更によるものです。
今回のPRの変更以外の箇所を大きく修正してはいけません。
PRが分岐し始める前のmainと比較して、変更点を確認してから修正を始めてください。
チェックアウトしたブランチへコミットして、プッシュして下さい。
プッシュ後に、GitHub Actionでテストが行われるので、マージはしないで下さい。
次のPRへ進んで下さい。





軽微なPRで Testのエラーがない場合のみマージして下さい。
次のPRへ進んで下さい。



https://github.com/kitamura-tetsuo/outliner/pull/141
をチェックアウトして下さい。
コンフリクトを確認し、注意深く重複が不整合が無いように、手動でコンフリクトを解消して下さい。
コンフリクトを解消後、コミットして、プッシュして下さい。





テキスト入力で、/が入力された時、Notionライクにインラインのコマンドパレットを表示する。
まず、SQL DBを表示可能なテーブルの実装から始めてください。
docs/outliner_editable_join_table_spec.md
に沿って進めて下さい。


GH_TOKENを使ってください。
apt update && apt install gh
gh pr list, gh issue list
を実行して下さい。

現在のコードとドキュメントと現在開かれているGitHub Issues, PRを読んで下さい。
次に行うべきタスクを複数列挙して、GitHub Issuesを作成して下さい。
既に存在する GitHub Issuesに対して、コメント欄を読み、議論の中で出てきていない関連情報を付け加える事が可能なら付け加えてください。
例えば、既に実装済みである、より良い実装方法がある、関連する実装が途中で止まっている等です。
重複した Open Issueがあれば統合してください。
ラベルの不足、誤りがあれば修正をして下さい。



apt update && apt install gh
gh pr list, gh issue list
を実行して下さい。

現在のコードとドキュメントとGitHub Issues, 現在開かれている GitHub PRをじっくりと多数読んで下さい。
以下の機能の実装を進める為の GitHub issueを作成又は更新して下さい。
実装済みの部分の確認、適切なサイズへの分割、段階的な実装など、管理しやすくする変更を歓迎します。
GitHub issueには enhancementのラベルをつけてください。

ページ内検索・置換機能・ハイライト表示機能


全文検索機能・全文置換機能



ページ内検索・置換機能・ハイライト表示機能


エイリアス機能。
outline表示の中に、他のアイテムを参照できる。
参照は参照先のUUIDで管理される。
どこのアイテムを参照しているかは、先祖がファイルパスのように表示される。
参照先の子孫ツリーが表示され、編集可能にする。


テキスト入力で、/が入力された時、Notionライクにインラインのコマンドパレットを表示する。
コマンドパレットから、SQL DBを表示可能なテーブル、チャートをアイテムとして追加する機能を追加する。









Run gh issue list to see the list of issues that are not assigned.
choose the oldest issue。
Please check the code to see if the content and purpose of the issue has not yet been implemented.
If the issue is not implemented, assign it to yourself.
If the issue is already implemented, close it and select the next issue that is not assigned.

Follow GitHub Flow to implement the issue:
    Run scripts/codex-setup.sh to start required services.
    Create a new branch.
    Link branch to issue.
    Implement missing services and components.
    Add unit, integration, and E2E tests as outlined in the spec.
    Run Playwright tests one file at a time (npx playwright test path/to/test.spec.ts). Note any timeouts but continue.
    Update docs/client-features.yaml with new features/tests.
    Update the issue with a summary of the work done and refine the spec if necessary.
    Commit in logical chunks and push when ready.
    Open a PR referencing the issue and summarize the work.
    Do not close the issue.
Proceed sequentially.
Show title and number of the issue you are working on on the message.
