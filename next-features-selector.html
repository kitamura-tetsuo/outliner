<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>次に実装する機能の選択</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .content {
            padding: 40px;
        }
        .category {
            margin-bottom: 40px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .category-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        .category-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #2c3e50;
            margin: 0 0 10px 0;
        }
        .category-description {
            color: #666;
            margin: 0;
        }
        .features {
            padding: 20px;
        }
        .feature-button {
            display: block;
            width: 100%;
            padding: 20px;
            margin-bottom: 15px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }
        .feature-button:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }
        .feature-button:last-child {
            margin-bottom: 0;
        }
        .feature-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin: 0 0 8px 0;
        }
        .feature-description {
            color: #666;
            margin: 0 0 10px 0;
            line-height: 1.5;
        }
        .feature-priority {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
        }
        .priority-high {
            background: #fee;
            color: #c53030;
        }
        .priority-medium {
            background: #fff3cd;
            color: #856404;
        }
        .priority-low {
            background: #d4edda;
            color: #155724;
        }
        .status {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .status h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        .status-label {
            font-weight: 500;
        }
        .status-count {
            color: #667eea;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 次に実装する機能の選択</h1>
            <p>Scrapbox/Workflowy クローンの完成に向けて、優先度の高い機能から実装しましょう</p>
        </div>
        
        <div class="content">
            <div class="status">
                <h3>📊 現在の実装状況</h3>
                <div class="status-item">
                    <span class="status-label">実装済み機能</span>
                    <span class="status-count">85+ 機能</span>
                </div>
                <div class="status-item">
                    <span class="status-label">カーソル移動・選択</span>
                    <span class="status-count">✅ 完了</span>
                </div>
                <div class="status-item">
                    <span class="status-label">テキストフォーマット</span>
                    <span class="status-count">✅ 完了</span>
                </div>
                <div class="status-item">
                    <span class="status-label">内部リンク・ナビゲーション</span>
                    <span class="status-count">✅ 完了</span>
                </div>
                <div class="status-item">
                    <span class="status-label">下書き・スケジュール公開</span>
                    <span class="status-count">✅ 完了</span>
                </div>
            </div>

            <div class="category">
                <div class="category-header">
                    <h2 class="category-title">🔍 検索・置換機能（VSCodeライク）</h2>
                    <p class="category-description">正規表現・ワイルドカード対応の高度な検索・置換機能</p>
                </div>
                <div class="features">
                    <button class="feature-button" onclick="createTask('SRC-0001')">
                        <div class="feature-title">SRC-0001: 基本検索機能</div>
                        <div class="feature-description">Ctrl+F による基本的なテキスト検索機能。大文字小文字区別、完全一致オプション付き</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('SRC-0002')">
                        <div class="feature-title">SRC-0002: 正規表現検索</div>
                        <div class="feature-description">正規表現パターンによる高度な検索機能。パターンマッチング、グループ化対応</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('SRC-0003')">
                        <div class="feature-title">SRC-0003: 検索・置換機能</div>
                        <div class="feature-description">Ctrl+H による検索・置換機能。一括置換、確認付き置換対応</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('SRC-0004')">
                        <div class="feature-title">SRC-0004: プロジェクト横断検索</div>
                        <div class="feature-description">複数プロジェクト・ページにまたがる検索機能。結果一覧表示、ジャンプ機能付き</div>
                        <span class="feature-priority priority-medium">優先度: 中</span>
                    </button>
                </div>
            </div>

            <div class="category">
                <div class="category-header">
                    <h2 class="category-title">🎯 マルチカーソル機能（VSCodeライク）</h2>
                    <p class="category-description">複数箇所の同時編集を可能にする高度なカーソル機能</p>
                </div>
                <div class="features">
                    <button class="feature-button" onclick="createTask('MCR-0001')">
                        <div class="feature-title">MCR-0001: 基本マルチカーソル</div>
                        <div class="feature-description">Ctrl+Click による複数カーソル作成。同時テキスト入力・削除機能</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('MCR-0002')">
                        <div class="feature-title">MCR-0002: 同一単語選択</div>
                        <div class="feature-description">Ctrl+D による同一単語の順次選択。一括編集機能</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('MCR-0003')">
                        <div class="feature-title">MCR-0003: 列選択マルチカーソル</div>
                        <div class="feature-description">Alt+Shift+ドラッグによる列選択マルチカーソル。縦方向の一括編集</div>
                        <span class="feature-priority priority-medium">優先度: 中</span>
                    </button>
                </div>
            </div>

            <div class="category">
                <div class="category-header">
                    <h2 class="category-title">🗂️ アウトライン操作機能</h2>
                    <p class="category-description">Workflowyライクな階層構造操作機能</p>
                </div>
                <div class="features">
                    <button class="feature-button" onclick="createTask('OTL-0001')">
                        <div class="feature-title">OTL-0001: インデント・アウトデント</div>
                        <div class="feature-description">Tab/Shift+Tab による階層レベルの変更。親子関係の管理</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('OTL-0002')">
                        <div class="feature-title">OTL-0002: 折りたたみ・展開</div>
                        <div class="feature-description">アイテムの折りたたみ・展開機能。大規模アウトラインの管理</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('OTL-0003')">
                        <div class="feature-title">OTL-0003: アイテム移動</div>
                        <div class="feature-description">ドラッグ&ドロップによるアイテム移動。階層構造の再編成</div>
                        <span class="feature-priority priority-medium">優先度: 中</span>
                    </button>
                </div>
            </div>

            <div class="category">
                <div class="category-header">
                    <h2 class="category-title">🗄️ データベース機能（SQLライク）</h2>
                    <p class="category-description">NotionのDBライクな機能をSQLパフォーマンスで実現</p>
                </div>
                <div class="features">
                    <button class="feature-button" onclick="createTask('DB-0001')">
                        <div class="feature-title">DB-0001: 基本データベーススキーマ</div>
                        <div class="feature-description">テーブル定義、カラム型定義、インデックス設定。WebAssembly SQLite基盤</div>
                        <span class="feature-priority priority-medium">優先度: 中</span>
                    </button>
                    <button class="feature-button" onclick="createTask('DB-0002')">
                        <div class="feature-title">DB-0002: Worker Thread処理</div>
                        <div class="feature-description">Web Worker でのデータベース処理。メインスレッドのブロッキング回避</div>
                        <span class="feature-priority priority-medium">優先度: 中</span>
                    </button>
                    <button class="feature-button" onclick="createTask('DB-0003')">
                        <div class="feature-title">DB-0003: クエリビルダー</div>
                        <div class="feature-description">SQLに詳しくないユーザー向けのビジュアルクエリビルダー</div>
                        <span class="feature-priority priority-low">優先度: 低</span>
                    </button>
                </div>
            </div>

            <div class="category">
                <div class="category-header">
                    <h2 class="category-title">📊 チャート・可視化機能</h2>
                    <p class="category-description">リッチなデータ可視化とリアクティブ更新</p>
                </div>
                <div class="features">
                    <button class="feature-button" onclick="createTask('CHT-0001')">
                        <div class="feature-title">CHT-0001: 基本チャート機能</div>
                        <div class="feature-description">棒グラフ、線グラフ、円グラフの基本チャート機能</div>
                        <span class="feature-priority priority-low">優先度: 低</span>
                    </button>
                    <button class="feature-button" onclick="createTask('CHT-0002')">
                        <div class="feature-title">CHT-0002: リアクティブ更新</div>
                        <div class="feature-description">データ変更時の自動チャート更新。パフォーマンス最適化済み</div>
                        <span class="feature-priority priority-low">優先度: 低</span>
                    </button>
                </div>
            </div>

            <div class="category">
                <div class="category-header">
                    <h2 class="category-title">🔧 開発・テスト改善</h2>
                    <p class="category-description">開発効率とテスト品質の向上</p>
                </div>
                <div class="features">
                    <button class="feature-button" onclick="createTask('DEV-0001')">
                        <div class="feature-title">DEV-0001: Cloud Tasks本番環境対応</div>
                        <div class="feature-description">Firebase Functions環境でのCloud Tasks API実装完成</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                    <button class="feature-button" onclick="createTask('DEV-0002')">
                        <div class="feature-title">DEV-0002: UI-0002テスト修正</div>
                        <div class="feature-description">スケジュール状態表示UIコンポーネントのテスト修正</div>
                        <span class="feature-priority priority-high">優先度: 高</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function createTask(featureId) {
            const taskDescriptions = {
                'SRC-0001': `基本検索機能（SRC-0001）の実装タスク:

1. 検索UI コンポーネントの作成
   - Ctrl+F でのダイアログ表示
   - 検索ボックス、オプション（大文字小文字区別、完全一致）
   - 前へ/次へナビゲーション

2. 検索ロジックの実装
   - テキスト検索アルゴリズム
   - マッチ結果のハイライト表示
   - 検索結果の循環ナビゲーション

3. テスト作成
   - E2Eテスト: client/e2e/core/SRC-0001.spec.ts
   - 基本検索、オプション機能、ナビゲーションのテスト

4. ドキュメント更新
   - docs/client-features.yaml への機能追加`,

                'SRC-0002': `正規表現検索機能（SRC-0002）の実装タスク:

1. 正規表現エンジンの統合
   - JavaScript RegExp の活用
   - パターンバリデーション
   - エラーハンドリング

2. UI拡張
   - 正規表現モード切り替え
   - パターン入力支援
   - マッチグループの表示

3. テスト作成
   - E2Eテスト: client/e2e/core/SRC-0002.spec.ts
   - 正規表現パターンのテスト

4. ドキュメント更新
   - docs/client-features.yaml への機能追加`,

                'MCR-0001': `基本マルチカーソル機能（MCR-0001）の実装タスク:

1. マルチカーソル管理システム
   - 複数カーソル状態の管理
   - Ctrl+Click でのカーソル追加
   - カーソル削除・リセット機能

2. 同時編集機能
   - 複数位置での同時テキスト入力
   - 同時削除・選択操作
   - カーソル間の同期

3. テスト作成
   - E2Eテスト: client/e2e/core/MCR-0001.spec.ts
   - マルチカーソル作成・編集のテスト

4. ドキュメント更新
   - docs/client-features.yaml への機能追加`,

                'OTL-0001': `インデント・アウトデント機能（OTL-0001）の実装タスク:

1. 階層構造管理
   - アイテムの親子関係定義
   - インデントレベルの管理
   - SharedTree での階層データ構造

2. キーボード操作
   - Tab でのインデント
   - Shift+Tab でのアウトデント
   - 階層移動時のバリデーション

3. テスト作成
   - E2Eテスト: client/e2e/core/OTL-0001.spec.ts
   - インデント・アウトデント操作のテスト

4. ドキュメント更新
   - docs/client-features.yaml への機能追加`,

                'DB-0001': `基本データベーススキーマ機能（DB-0001）の実装タスク:

1. WebAssembly SQLite統合
   - SQLite WASM ライブラリの導入
   - 基本的なデータベース操作
   - Fluid Framework との連携

2. スキーマ定義システム
   - テーブル・カラム定義
   - データ型システム
   - インデックス管理

3. テスト作成
   - ユニットテスト: データベース操作のテスト
   - E2Eテスト: client/e2e/core/DB-0001.spec.ts

4. ドキュメント更新
   - docs/client-features.yaml への機能追加`,

                'CHT-0001': `基本チャート機能（CHT-0001）の実装タスク:

1. チャートライブラリ統合
   - Chart.js または D3.js の導入
   - 基本チャート型の実装
   - データバインディング

2. チャートコンポーネント
   - 棒グラフ、線グラフ、円グラフ
   - 設定可能なオプション
   - レスポンシブデザイン

3. テスト作成
   - E2Eテスト: client/e2e/core/CHT-0001.spec.ts
   - チャート表示・操作のテスト

4. ドキュメント更新
   - docs/client-features.yaml への機能追加`,

                'DEV-0001': `Cloud Tasks本番環境対応（DEV-0001）の実装タスク:

1. Firebase Functions環境設定
   - Cloud Tasks API の有効化
   - 認証設定の確認・修正
   - 環境変数の設定

2. Cloud Tasks実装完成
   - functions/scripts/setup-cloud-tasks.js の実行
   - エラー修正とデバッグ
   - 本番環境でのテスト

3. テスト実行
   - 既存テストの確認
   - 本番環境での動作確認

4. ドキュメント更新
   - 設定手順の文書化`,

                'DEV-0002': `UI-0002テスト修正（DEV-0002）の実装タスク:

1. テスト問題の特定
   - data-testid="schedule-status" 要素の確認
   - ScheduleStatus.svelte コンポーネントの確認
   - テストセレクターの修正

2. コンポーネント修正
   - data-testid 属性の追加
   - UI表示の確認
   - テスト環境での動作確認

3. テスト修正・実行
   - client/e2e/core/UI-0002.spec.ts の修正
   - テストの実行・確認

4. 関連テストの確認
   - 他のUIテストへの影響確認`
            };

            const description = taskDescriptions[featureId] || `${featureId} の実装タスクを作成します。`;
            
            if (confirm(`${featureId} の実装タスクを作成しますか？\n\n${description}`)) {
                // ここで実際のタスク作成処理を行う
                // 例: GitHub Issue作成、プロジェクト管理ツールへの追加など
                alert(`${featureId} の実装タスクが作成されました！\n\n次のステップ:\n1. docs/client-features.yaml に機能定義を追加\n2. 実装を開始\n3. テストを作成・実行\n4. ドキュメントを更新`);
            }
        }
    </script>
</body>
</html>
