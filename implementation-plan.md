# 選択範囲機能（SLR: Selection Range）実装計画

## 1. 複数アイテムにまたがる選択範囲の実装

### 1.1 Shift+上下キーによる複数アイテム選択の強化
- Cursor.ts の extendSelectionUp/Down メソッドを拡張して、複数アイテム選択をより堅牢に実装
- 選択範囲の開始と終了が異なるアイテムにある場合の処理を改善
- 選択方向（isReversed）の適切な管理

### 1.2 マウスドラッグによる複数アイテム選択の実装
- OutlinerItem.svelte にマウスドラッグイベントハンドラを追加
- ドラッグ開始時と終了時のアイテムとオフセットを追跡
- 複数アイテムにまたがるドラッグの検出と処理
- EditorOverlayStore に選択範囲情報を適切に設定

## 2. 選択範囲に対する編集操作の実装

### 2.1 複数アイテム選択時のコピー＆ペースト
- Cursor.ts の copySelectedText と cutSelectedText メソッドを拡張
- 複数アイテムにまたがる選択範囲のテキスト取得ロジックの実装
- クリップボードへの適切なフォーマットでのコピー
- 複数アイテム選択時のペースト操作の実装

### 2.2 複数アイテム選択時の削除
- Cursor.ts に deleteSelection メソッドを追加
- 複数アイテムにまたがる選択範囲の削除ロジック
- 削除後のカーソル位置の適切な設定
- アイテムの結合処理（必要な場合）

## 3. ドラッグ＆ドロップによるテキスト操作の実装

### 3.1 選択範囲のドラッグ＆ドロップ
- OutlinerItem.svelte にドラッグ＆ドロップイベントハンドラを追加
- ドラッグ可能な選択範囲の視覚的表示
- ドロップ位置の検出と処理
- テキスト移動のロジック実装

### 3.2 ドラッグ＆ドロップ時のカーソル位置の更新
- ドロップ後のカーソル位置の適切な設定
- 選択範囲の更新または解除
- 複数アイテムにまたがるドラッグ＆ドロップの処理

## 4. テスト実装

### 4.1 E2Eテスト
- 複数アイテム選択のテスト
- コピー＆ペースト操作のテスト
- 削除操作のテスト
- ドラッグ＆ドロップのテスト

### 4.2 ユニットテスト
- Cursor.ts の新機能のテスト
- EditorOverlayStore の選択範囲関連機能のテスト

## 5. ドキュメント更新

- docs/client-features.yaml の更新
- 新機能の使用方法のドキュメント作成
