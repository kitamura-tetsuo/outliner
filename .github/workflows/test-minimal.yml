name: Minimal Test

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  minimal-test:
    runs-on: self-hosted
    timeout-minutes: 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Basic environment check
      run: |
        echo "=== Basic Environment Check ==="
        echo "User: $(whoami)"
        echo "Home: $HOME"
        echo "PWD: $(pwd)"
        echo "Date: $(date)"
        
    - name: Check Node.js
      run: |
        echo "=== Node.js Check ==="
        which node || echo "Node not found in PATH"
        node --version || echo "Node version check failed"
        which npm || echo "NPM not found in PATH"
        npm --version || echo "NPM version check failed"
        
    - name: Check repository
      run: |
        echo "=== Repository Check ==="
        ls -la
        echo "Git status:"
        git status || echo "Git status failed"
        
    - name: Check package.json
      run: |
        echo "=== Package.json Check ==="
        if [ -f package.json ]; then
          echo "package.json exists"
          cat package.json
        else
          echo "package.json not found"
        fi
        
    - name: Success
      run: |
        echo "=== Success ==="
        echo "Minimal test completed successfully!"
        echo "Environment appears to be working correctly."
