- id: API-0001
  title: Firebase Functions APIサーバーの修正
  description: Firebase Functions APIサーバーのローカルテスト時のエラーを修正し、正常に動作するようにする機能
  category: api-server
  status: implemented
  acceptance:
  - CORS設定が正しく構成され、クロスオリジンリクエストが正常に処理される
  - Firebase Functions エミュレーターが正常に起動する
  - Firebase Hosting経由でのリクエストが正しくFunctionsにルーティングされる
  - deleteContainerエンドポイント（/api/deleteContainer）が認証エラーを適切に処理する
  - deleteUserエンドポイント（/api/deleteUser）が認証エラーを適切に処理する
  - fluid-tokenエンドポイント（/api/fluid-token）が認証エラーを適切に処理する
  - getUserContainersエンドポイント（/api/getUserContainers）が認証エラーを適切に処理する
  - save-containerエンドポイント（/api/save-container）が認証エラーを適切に処理する
  - ヘルスチェックエンドポイント（/health）が正常に応答する
  - 'ポート設定が正しく構成される（Hosting: 57000, Functions: 57070）'
  - 必須パラメータが不足している場合に400エラーが返される
  - 無効なHTTPメソッドに対して405エラーが返される
  - 環境変数が正しく読み込まれ、Azure Fluid Relay設定が適用される
  - 認証に失敗した場合に401または500エラーが返される
  tests:
  - client/e2e/core/API-0001.spec.ts
  - functions/test/firebase-functions.test.js
  components:
  - client/.env.localhost.test
  - firebase.json
  - functions/.env
  - functions/index.js
- id: API-0002
  title: Firebase emulator起動待機機能
  description: Firebase emulatorの起動を待つリトライ機能により、ECONNREFUSED エラーを回避する機能
  category: api-server
  status: implemented
  acceptance:
  - ECONNREFUSED エラーが発生した場合、指数バックオフでリトライする
  - ECONNREFUSED以外のエラーは即座に失敗とする
  - Firebase Auth emulatorへの接続テストを行い、成功するまで待機する
  - Firebase emulator環境変数が設定されている場合、emulatorの起動を待機する
  - emulator環境でない場合は待機をスキップする
  - リトライ回数と遅延時間をログに出力する
  - 接続成功時にユーザー数とユーザー情報をログに出力する
  - 最大30回のリトライを行い、初期遅延1秒、最大遅延10秒で待機する
  tests:
  - client/e2e/core/API-0002.spec.ts
  - server/tests/log-service-emulator-wait.test.js
  components:
  - server/log-service.js
- id: API-0003
  title: Admin check for container user listing
  description: /api/get-container-users requires admin role
  category: api-server
  status: implemented
  acceptance:
  - 管理者はコンテナのユーザーリストを取得できる
  - 非管理者がアクセスした場合403エラーを返す
  tests:
  - client/e2e/core/API-0003.spec.ts
  - server/tests/get-container-users.test.js
  components:
  - server/log-service.js
- id: API-0004
  title: Admin user list
  description: /api/list-users returns all users for admins only
  category: api-server
  status: implemented
  acceptance:
  - 管理者はFirebaseユーザー一覧を取得できる
  - 管理者以外のリクエストは403エラーを返す
  tests:
  - server/tests/log-service.test.js
  components:
  - server/log-service.js
- id: APP-0001
  title: プロジェクトページ表示時にグローバルテキストエリアにフォーカスを設定
  description: プロジェクトページ表示時に自動的にグローバルテキストエリアにフォーカスを設定し、すぐに入力できるようにします。
  category: application
  status: implemented
  acceptance:
  - カーソルが表示される
  - プロジェクトページ表示時にグローバルテキストエリアにフォーカスが設定される
  - ユーザーがクリックせずに直接テキスト入力が可能になる
  tests:
  - client/e2e/core/APP-0001.spec.ts
- id: CHT-001
  title: Chart Component
  description: 保存されたデータをグラフ表示するチャートコンポーネント
  category: visualization
  status: implemented
  components:
  - src/components/ChartComponent.svelte
  tests:
  - client/e2e/core/CHT-001.spec.ts
  acceptance:
  - データをグラフで表示する
  - データ更新時にグラフが自動更新される
- id: CLM-0001
  title: クリックで編集モードに入る
  shortcut: クリック
  description: クリックで編集モードに入ります。
  category: cursor-movement
  status: implemented
  tests:
  - client/e2e/core/CLM-0001.spec.ts
  acceptance:
  - カーソルがクリック位置に表示される（最後の行を除く）
  - カーソルが点滅する
  - カーソルが表示される
  - クリックで編集モードに入る
  - 編集モードで文字入力が可能になる
- id: CLM-0002
  title: 左へ移動
  shortcut: ←
  description: カーソルを1文字左に移動します。
  category: cursor-movement
  status: implemented
  acceptance:
  - カーソルを1文字左に移動する
  - 一番最初の文字にある時は、一つ前のアイテムの最後の文字へ移動する
  tests:
  - client/e2e/core/CLM-0002.spec.ts
- id: CLM-0003
  title: 右へ移動
  shortcut: →
  description: カーソルを1文字右に移動します。
  category: cursor-movement
  status: implemented
  acceptance:
  - カーソルを1文字右に移動する
  - 一番最後の文字にある時は、一つ次のアイテムの最初の文字へ移動する
  tests:
  - client/e2e/core/CLM-0003.spec.ts
- id: CLM-0004
  title: 上へ移動
  shortcut: ↑
  description: カーソルを1行上に移動します。
  category: cursor-movement
  status: implemented
  acceptance:
  - カーソルを1行上に移動する
  - 一番上の行にある時で、一つ前のアイテムがない時は、同じアイテムの先頭へ移動する
  - 一番上の行にある時は、一つ前のアイテムの最後の行へ移動する。このとき、x座標の変化が最も小さい位置にカーソルをセットする。文字数が少ない場合は大きく移動する場合もある。カーソル上下以外の操作をしていない場合は、最初にカーソル上を押し始めた x座標からの変化が小さい位置にカーソルをセットする。
  - 一番上の行以外にある時は、同じアイテムの1行上へ移動する
  tests:
  - client/e2e/core/CLM-0004.spec.ts
- id: CLM-0005
  title: 下へ移動
  shortcut: ↓
  description: カーソルを1行下に移動します。
  category: cursor-movement
  status: implemented
  acceptance:
  - カーソルを1行下に移動する
  - 一番下の行にある時で、一つ次のアイテムがない時は、同じアイテムの末尾へ移動する
  - 一番下の行にある時は、一つ次のアイテムの最初の行へ移動する。このとき、x座標の変化が最も小さい位置にカーソルをセットする。文字数が少ない場合は大きく移動する場合もある。カーソル上下以外の操作をしていない場合は、最初にカーソル下を押し始めた x座標からの変化が小さい位置にカーソルをセットする。
  - 一番下の行以外にある時は、同じアイテムの1行下へ移動する
  tests:
  - client/e2e/core/CLM-0005.spec.ts
- id: CLM-0007
  title: 行頭へ移動
  shortcut: Home
  description: カーソルを行の先頭に移動します。
  category: cursor-movement
  status: implemented
  acceptance:
  - Homeキーを押すと、カーソルが現在の行の先頭に移動する
  - 複数行のアイテムでは、現在のカーソルがある行の先頭に移動する
  tests:
  - client/e2e/core/CLM-0007.spec.ts
- id: CLM-0008
  title: 行末へ移動
  shortcut: End
  description: カーソルを行の末尾に移動します。
  category: cursor-movement
  status: implemented
  acceptance:
  - Endキーを押すと、カーソルが現在の行の末尾に移動する
  tests:
  - client/e2e/core/CLM-0008.spec.ts
- id: CLM-0100
  title: 通常クリックでカーソルが増えないこと
  description: アイテム間を移動する際に、カーソルが増えないようにします。
  category: cursor-management
  status: implemented
  tests:
  - client/e2e/core/CLM-0100.spec.ts
  acceptance:
  - アイテム間をクリックで移動しても、カーソルの数が増えない
  - 前のアイテムのカーソルは完全に削除される
  - 常に1つのカーソルだけが表示される
- id: CLM-0101
  title: アイテム間移動時のカーソル重複と入力分散問題
  description: アイテム間を移動する際に、複数のカーソルが生成され、入力が複数のアイテムに分散する問題を検出します。
  category: cursor-management
  status: implemented
  tests:
  - client/e2e/core/CLM-0101.spec.ts
  acceptance:
  - 1番目のアイテムに「123」の繰り返しが表示される問題を検出する
  - 入力が複数のアイテムに分散する問題を検出する
  - 異なる位置に複数のカーソルが表示される問題を検出する
  - 複数のアイテムをクリックすると、複数のカーソルが生成される問題を検出する
- id: CLM-0102
  title: 空のテキストアイテムでのカーソル移動と複数回のキーボード操作
  description: 空のテキストアイテムでのカーソル移動と、クリック後の複数回のキーボード操作が正しく機能することを確認します。
  category: cursor-management
  status: implemented
  tests:
  - client/e2e/core/CLM-0102.spec.ts
  acceptance:
  - アイテム間を移動しても常に1つのカーソルだけが表示される
  - クリック後に複数回のキーボード操作でカーソルが正しく移動する
  - 入力が正しいアイテムに行われる
  - 空のテキストアイテム間をキーボードで移動できる
- id: CLM-0103
  title: フォーマット文字列でのカーソル操作
  description: フォーマット（太字、斜体など）が適用された文字列内でのカーソル移動が正しく機能することを確認します。
  category: cursor-movement
  status: implemented
  tests:
  - client/e2e/core/CLM-0103.spec.ts
  acceptance:
  - Home/Endキーがフォーマット文字列で正しく機能する
  - Shift+矢印キーによる選択がフォーマット文字列で正しく機能する
  - フォーマット文字列内でのカーソル移動が正しく機能する
  - 複数のフォーマットが混在する文字列でのカーソル移動が正しく機能する
- id: COL-0001
  title: 他ユーザーのカーソル表示
  description: 複数ユーザーが同じページを編集しているとき、他ユーザーのカーソル位置をリアルタイムに表示する
  category: collaboration
  status: implemented
  acceptance:
  - Fluid Framework の signal 機能でカーソル位置を同期する
  - 他ユーザーがカーソルを移動すると、その位置が表示される
  tests:
  - client/e2e/core/COL-0001.spec.ts
- id: DBW-001
  title: Client-Side SQL Database
  description: IndexedDB上にSQLデータベースを構築し、オフラインでページを保存できる機能
  category: database
  status: implemented
  tests:
  - client/e2e/new/DBW-001.spec.ts
- id: FLD-0001
  title: プロジェクトタイトルからFluidClientを取得する機能
  description: clientRegistryを走査して、Project.titleが一致するFluidClientインスタンスを取得する機能。プロジェクトタイトルとFluid containerのIDは1:1の対応関係にある。
  category: fluid-service
  status: implemented
  acceptance:
  - clientRegistryに登録されている全てのFluidClientを走査して一致するものを探す
  - プロジェクトタイトルからFluidClientインスタンスを取得できる
  - プロジェクトタイトルが指定されていない場合はエラーを返す
  - プロジェクトタイトルに一致するFluidClientが見つからない場合はundefinedを返す
  - プロジェクトレイアウトでこの機能を使用してプロジェクトデータを読み込める
  - 取得したFluidClientインスタンスを使用してプロジェクトデータにアクセスできる
  - 新しいプロジェクトを作成してからFluidClientを取得できる
  tests:
  - client/e2e/core/FLD-0001.spec.ts
- id: FMT-0001
  title: フォーマット表示
  description: Scrapbox構文のフォーマットを視覚的に表示する機能
  category: text-formatting
  status: implemented
  acceptance:
  - Scrapbox構文のUXをクローンし、編集中はプレーンテキスト、非編集時はフォーマット表示となる
  - カーソルがあるアイテムではプレーンテキストの入力内容がそのまま表示される
  - カーソルがないアイテムではフォーマットされた内容が表示される
  - コードフォーマット（`text`）が視覚的にコードスタイルで表示される
  - 取り消し線フォーマット（[- text]）が視覚的に取り消し線付きで表示される
  - 太字フォーマット（[[text]]）が視覚的に太字で表示される
  - 斜体フォーマット（[/ text]）が視覚的に斜体で表示される
  tests:
  - client/e2e/core/FMT-0001.spec.ts
- id: FMT-0002
  title: フォーマット組み合わせ
  description: Scrapbox構文の複数フォーマットの組み合わせを視覚的に表示する機能
  category: text-formatting
  status: implemented
  acceptance:
  - カーソルがあるアイテムでは組み合わせフォーマットもプレーンテキストで表示される
  - 太字と取り消し線の組み合わせが正しく表示される
  - 太字と斜体の組み合わせが正しく表示される
  - 斜体とコードの組み合わせが正しく表示される
  - 複数のフォーマットが入れ子になっている場合も正しく表示される
  tests:
  - client/e2e/core/FMT-0002.spec.ts
- id: FMT-0003
  title: 拡張フォーマット
  description: Scrapbox構文の拡張フォーマット（リンク、引用）を視覚的に表示する機能
  category: text-formatting
  status: implemented
  acceptance:
  - カーソルがあるアイテムでは拡張フォーマットもプレーンテキストで表示される
  - リンク構文（[URL]）が正しくリンクとして表示される
  - 引用構文（> テキスト）が正しく引用として表示される
  - 複合フォーマット（引用内の太字や斜体など）が正しく表示される
  tests:
  - client/e2e/core/FMT-0003.spec.ts
- id: FMT-0004
  title: クリップボードからのペーストとフォーマット
  description: クリップボードからのテキストペーストとフォーマット保持機能
  category: text-formatting
  status: implemented
  acceptance:
  - カーソル位置にテキストがペーストされる
  - フォーマット構文を含むテキストのペーストが正しく機能する
  - プレーンテキストのペーストが正しく機能する
  - ペーストされたフォーマット構文が視覚的に正しく表示される
  - 複数行テキストのペーストが正しく機能する
  tests:
  - client/e2e/core/FMT-0004.spec.ts
- id: FMT-0006
  title: カーソル移動時のフォーマット表示の一貫性
  description: カーソル移動時にフォーマット表示が一貫して適切に切り替わることを確認します
  category: text-formatting
  status: implemented
  acceptance:
  - カーソルがあるアイテムでは制御文字（[[]], [/], [-], `）が表示される
  - カーソルがないアイテムでは制御文字が非表示でフォーマットが適用される
  - カーソル移動時に表示が適切に切り替わる
  - タイトル（最初の行）は通常のテキスト表示される（ボールド表示されない）
  - リンク構文（[ text]]）が正しくリンクとして表示される
  tests:
  - client/e2e/core/FMT-0006.spec.ts
- id: FMT-0007
  title: 内部リンク機能の表示
  description: /project-name/page-name 形式の内部リンクをサポートする機能
  category: text-formatting
  status: implemented
  acceptance:
  - '[/project-name/page-name] 形式の内部リンクが正しく表示される'
  - '[page-name] 形式の内部リンクが正しく表示される'
  - カーソルがあるアイテムでは内部リンクもプレーンテキストで表示される
  - カーソルがないアイテムでは内部リンクが視覚的にリンクとして表示される
  tests:
  - client/e2e/core/FMT-0007.spec.ts
- id: FTR-0012
  title: User can reset forgotten password
  status: implemented
  components:
  - lib/email/resetPassword.ts
  - routes/auth/forgot.svelte
  tests:
  - tests/feature/FTR-0012.spec.ts
  acceptance:
  - ユーザーがメールアドレスを入力すると、リセットリンクが送信される
  - リンクは 30 分で失効する
  - 正しいトークンを送るとパスワードを再設定できる
- id: FTR-0013
  title: Use environment variables in min page
  status: implemented
  components:
  - client/.env.example
  - client/src/routes/min/+page.svelte
  tests:
  - client/e2e/core/FTR-0013.spec.ts
  acceptance:
  - Firebase config values come from VITE_FIREBASE_* variables
  - Token verification URL uses VITE_TOKEN_VERIFY_URL
- id: IME-0001
  title: IMEを使用した日本語入力
  status: implemented
  tests:
  - client/e2e/core/IME-0001.spec.ts
  acceptance:
  - IMEを使用した日本語入力が可能になる
  - 入力途中の文字がカーソル位置に表示される
  - 変換候補がカーソル位置に表示される
- id: ITM-0001
  title: Enterで新規アイテム追加
  shortcut: Enter
  description: カーソル位置でアイテムを分割し、新しいアイテムを追加します。
  category: item-management
  status: implemented
  acceptance:
  - Enterキーを押すと、カーソル位置でアイテムが分割される
  - カーソルは新しいアイテムの先頭に移動する
  - カーソル位置より前のテキストは現在のアイテムに残る
  - カーソル位置より後のテキストは新しいアイテムに移動する
  - タイトルでは、新しいアイテムは最初の子として追加される
  - 通常のアイテムでは、新しいアイテムは兄弟として追加される
  tests:
  - client/e2e/core/ITM-0001-title.spec.ts
  - client/e2e/core/ITM-0001.spec.ts
- id: LNK-0001
  title: 内部リンクのURL生成機能
  description: 内部リンクのURLが正しく生成される機能
  category: navigation
  status: implemented
  acceptance:
  - '[/project-name/page-name] 形式の内部リンクが /project-name/page-name のURLを生成する'
  - '[page-name] 形式の内部リンクが /page-name のURLを生成する'
  - 内部リンクのHTMLが正しく生成される
  - 内部リンクのURLが正しく生成される
  tests:
  - client/e2e/core/LNK-0001.spec.ts
- id: LNK-0002
  title: 内部リンクの機能検証
  description: 内部リンクが正しく機能することを確認する
  category: navigation
  status: implemented
  acceptance:
  - プロジェクト内部リンク（/project-name/page-name形式）のhref属性が正しく生成される
  - 内部リンクのhref属性が正しく生成される
  - 内部リンクのクラスとテキストが正しく設定される
  - 様々な形式の内部リンクが正しく生成される
  tests:
  - client/e2e/core/LNK-0002.spec.ts
- id: LNK-0003
  title: 内部リンクのナビゲーション機能
  description: 内部リンクをクリックして別のページに移動する機能
  category: navigation
  status: implemented
  acceptance:
  - URLを直接入力して内部リンク先のページにアクセスできる
  - プロジェクト内部リンクの形式が正しく生成される（[/project-name/page-name]形式）
  - プロジェクト内部リンクをクリックして遷移先のページ内容が正しく表示される
  - プロジェクト内部リンク（/project-name/page-name形式）をクリックすると対応するページに移動する
  - 内部リンクの形式が正しく生成される（[page-name]形式）
  - 内部リンクをクリックして遷移先のページ内容が正しく表示される
  - 内部リンクをクリックすると対応するページに移動する
  - 存在しないページへのリンクをクリックした場合も対応するURLに移動する
  - 存在しないページへの内部リンクをクリックした場合、新規ページが作成される
  tests:
  - client/e2e/core/LNK-0003.spec.ts
  testcases:
  - 内部リンクをクリックして別のページに移動する
  - URLを直接入力して内部リンク先のページにアクセスする
  - 実際のアプリケーションで内部リンクを作成する
  - 実際のアプリケーションでプロジェクト内部リンクを作成する
  - 内部リンクをクリックして遷移先のページ内容が正しく表示される
  - 存在しないページへの内部リンクをクリックした場合の挙動
  - プロジェクト内部リンクをクリックして遷移先のページ内容が正しく表示される
- id: LNK-0004
  title: 仮ページ機能
  description: 存在しないページへのリンクをクリックした場合に仮ページを表示し、編集時のみ実際のページとして保存する機能
  category: navigation
  status: implemented
  acceptance:
  - 仮ページが保存された後は、通常のページとして扱われる
  - 仮ページであることを示すUIは表示されない（非表示設定）
  - 仮ページにアクセスしただけでは、ページは作成されない
  - 仮ページの通知UIは非表示になっている
  - 仮ページを編集した場合のみ、実際のページとして保存される
  - 存在しないページへのリンクをクリックした場合、仮ページを表示する
  tests:
  - client/e2e/core/LNK-0004.spec.ts
  testcases:
  - 存在しないページへのリンクをクリックした場合に仮ページが表示される
  - 仮ページを編集した場合に実際のページとして保存される
  - 仮ページにアクセスしただけではページが作成されないことを確認
  - 仮ページの通知UIが非表示になっている
  - 仮ページの通知UIのアクションボタンが機能する（スキップされる）
- id: LNK-0005
  title: リンクプレビュー機能
  description: 内部リンクにマウスオーバーした際にページ内容のプレビューを表示する機能
  category: navigation
  status: implemented
  acceptance:
  - プレビューにはページのタイトルと内容の一部が表示される
  - プレビューはマウスが離れると非表示になる
  - 内部リンクにマウスオーバーするとプレビューが表示される
  - 別プロジェクトのページへのリンクの場合は、その旨が表示される
  - 存在しないページへのリンクの場合は、その旨が表示される
  tests:
  - client/e2e/core/LNK-0005.spec.ts
  testcases:
  - 内部リンクにマウスオーバーするとプレビューが表示される
  - プレビューにページのタイトルと内容の一部が表示される
  - プレビューはマウスが離れると非表示になる
  - 存在しないページへのリンクの場合は、その旨が表示される
  notes:
  - テスト環境ではマウスイベントが正確に動作しない場合があるため、TestHelpers.forceHoverEvent()とTestHelpers.forceLinkPreview()を使用してテストを安定化
- id: LNK-0007
  title: バックリンク機能
  description: あるページからリンクされているページの一覧を表示する機能
  category: navigation
  status: implemented
  acceptance:
  - バックリンクのコンテキスト（リンクを含む文脈）が表示される
  - バックリンクの数がバッジとして表示される
  - バックリンクをクリックすると、リンク元のページに移動できる
  - バックリンクパネルには、そのページへのリンクを含むページの一覧が表示される
  - バックリンクパネルは開閉できる
  - ページにバックリンクパネルが表示される
  tests:
  - client/e2e/core/LNK-0007.spec.ts
  testcases:
  - ページにバックリンクパネルが表示される
  - バックリンクパネルにリンク元ページの一覧が表示される
  - バックリンクの数がバッジとして表示される
  - バックリンクパネルを開閉できる
  - バックリンクをクリックするとリンク元ページに移動できる
  notes:
  - テスト環境ではバックリンクパネルの開閉が正確に動作しない場合があるため、TestHelpers.openBacklinkPanel()を使用してテストを安定化
- id: LOG-0001
  title: Development log service
  description: Node server used in development and test environments to store logs. Firebase emulator initialization is handled by a separate script.
  category: api-server
  status: implemented
  components:
  - server/log-service.js
  - server/scripts/init-firebase-emulator.js
  tests: []
- id: MCE-0001
  title: Multi-Cursor Editing
  description: 複数のカーソルを使って同時に編集できる機能
  category: collaboration
  status: implemented
  acceptance:
  - Undo/redoがすべてのカーソルに適用される
  - 各カーソルから独立してテキスト編集できる
  - 複数のカーソルを配置できる
  tests:
  - client/e2e/disabled/multi-cursor.spec.ts
  - client/src/stores/EditorOverlayStore.test.ts
- id: NAV-0001
  title: プロジェクト選択とページナビゲーション
  description: ルートページでプロジェクトを選択した場合にプロジェクトページへ遷移し、プロジェクトページからページリストを通じて個別ページへ遷移する機能
  category: navigation
  status: implemented
  acceptance:
  - プロジェクトページ(/[project_name])のページリストから、対応するページ(/[project_name]/[page_name])へ遷移するリンクが機能する
  - プロジェクト選択後、プロジェクト内のページ一覧が表示される
  - ページリストの各ページ名をクリックすると、そのページの内容が表示される
  - ルートページ(/)でプロジェクトを選択すると、対応するプロジェクトページ(/[project_name])へ遷移する
  tests:
  - client/e2e/core/NAV-0001.spec.ts
- id: NAV-0002
  title: プロジェクトページへのリンク機能
  description: ページ表示時にプロジェクトページへのリンクをパンくずナビゲーションとして表示する機能
  category: navigation
  status: implemented
  acceptance:
  - パンくずナビゲーションにプロジェクトページへのリンクが表示される
  - パンくずナビゲーションにホームへのリンクが表示される
  - パンくずナビゲーションに現在のページ名が表示される
  - プロジェクトページへのリンクをクリックするとプロジェクトページに遷移する
  - ページ表示時にパンくずナビゲーションが表示される
  - ホームへのリンクをクリックするとホームページに遷移する
  tests:
  - client/e2e/core/NAV-0002.spec.ts
- id: SEC-0001
  title: Dotenvx encrypted env files
  description: Use dotenvx to encrypt server environment files
  category: security
  status: implemented
  components: []
  tests:
  - client/e2e/core/SEC-0001.spec.ts
- id: SEC-0002
  title: Two-Factor Authentication (2FA)
  description: This project intentionally omits two-factor authentication. Firebase Authentication handles user sign-in, and email link authentication is used only during testing.
  category: security
  status: deprecated
  components: []
  tests: []
- id: SLR-0001
  title: Shift + 上下左右
  shortcut: Shift + 上下左右
  description: カーソルを1文字上下左右に移動し、選択範囲を広げます。
  category: selection-range
  status: implemented
  acceptance:
  - Shift + 上で選択範囲の上端を広げる
  - Shift + 下で選択範囲の下端を広げる
  - Shift + 右で選択範囲の右端を広げる
  - Shift + 左で選択範囲の左端を広げる
  tests:
  - client/e2e/core/SLR-0001.spec.ts
- id: SLR-0002
  title: 行頭まで選択
  shortcut: Shift + Home
  description: カーソル位置から行の先頭までを選択します。
  category: selection-range
  status: implemented
  acceptance:
  - Shift + Homeで現在位置から行頭までを選択する
  - 複数行のアイテムでは、現在のカーソルがある行の先頭までを選択する
  tests:
  - client/e2e/core/SLR-0002.spec.ts
- id: SLR-0003
  title: 行末まで選択
  shortcut: Shift + End
  description: カーソル位置から行の末尾までを選択します。
  category: selection-range
  status: implemented
  acceptance:
  - Shift + Endで現在位置から行末までを選択する
  - 複数行のアイテムでは、現在のカーソルがある行の末尾までを選択する
  tests:
  - client/e2e/core/SLR-0003.spec.ts
- id: SLR-0004
  title: マウスドラッグによる選択
  description: マウスドラッグでテキストを選択します。
  category: selection-range
  status: implemented
  acceptance:
  - マウスドラッグで単一アイテム内のテキストを選択できる
  - 選択範囲が視覚的に表示される
  - 選択範囲のテキストをコピーできる
  tests:
  - client/e2e/core/SLR-0004.spec.ts
- id: SLR-0005
  title: 複数アイテムにまたがる選択
  description: 複数アイテムにまたがるテキスト選択機能
  category: selection-range
  status: implemented
  acceptance:
  - Shift+上下キーで複数アイテムにまたがる選択範囲を作成できる
  - マウスドラッグで複数アイテムにまたがる選択範囲を作成できる
  - 複数アイテムにまたがる選択範囲が視覚的に表示される
  tests:
  - client/e2e/core/SLR-0005.spec.ts
- id: SLR-0006
  title: 複数アイテム選択範囲のコピー＆ペースト
  description: 複数アイテムにまたがる選択範囲のコピー＆ペースト機能
  category: selection-range
  status: implemented
  acceptance:
  - コピーしたテキストを別の場所にペーストできる
  - 複数アイテムにまたがる選択範囲のテキストをコピーできる
  - 複数行テキストをペーストすると適切に複数アイテムに分割される
  tests:
  - client/e2e/core/SLR-0006.spec.ts
- id: SLR-0007
  title: 複数アイテム選択範囲の削除
  description: 複数アイテムにまたがる選択範囲の削除機能
  category: selection-range
  status: implemented
  acceptance:
  - カーソル位置が適切に更新される
  - 削除後、アイテムが適切に結合される
  - 複数アイテムにまたがる選択範囲をBackspace/Deleteキーで削除できる
  tests:
  - client/e2e/core/SLR-0007.spec.ts
- id: SLR-0008
  title: 選択範囲のエッジケース
  description: 選択範囲機能のエッジケースのテスト
  category: selection-range
  status: implemented
  acceptance:
  - 空のアイテムを含む選択範囲を作成できる
  - 複数アイテムにまたがる選択範囲を削除した後、カーソル位置が適切に更新される
  - 選択範囲の方向（正方向/逆方向）を切り替えることができる
  - 長いテキストを含むアイテムの選択範囲を作成できる
  tests:
  - client/e2e/core/SLR-0008.spec.ts
- id: SLR-0009
  title: ドラッグ＆ドロップによるテキスト移動
  description: 選択範囲のテキストをドラッグ＆ドロップで移動する機能
  category: selection-range
  status: implemented
  acceptance:
  - アイテム全体をドラッグ＆ドロップで移動できる
  - ドラッグ中に視覚的なフィードバックが表示される
  - ドロップ位置に応じて適切にテキストが挿入される
  - 単一アイテム内の選択範囲をドラッグ＆ドロップで移動できる
  - 複数アイテムにまたがる選択範囲をドラッグ＆ドロップで移動できる
  tests:
  - client/e2e/core/SLR-0009.spec.ts
- id: SLR-0010
  title: 選択範囲のフォーマット変更
  description: 選択範囲のテキストのフォーマット（太字、斜体、下線、取り消し線、コード）を変更する機能
  category: selection-range
  status: implemented
  acceptance:
  - Scrapbox構文に準拠したフォーマットが適用される
  - キーボードショートカットでフォーマットを変更できる
  - コードフォーマット（`text`）を適用できる
  - 単一アイテム内の選択範囲のフォーマットを変更できる
  - 取り消し線フォーマット（[- text]）を適用できる
  - 同じフォーマットを再度適用すると、フォーマットが解除される
  - 太字フォーマット（[[text]]）を適用できる
  - 斜体フォーマット（[/ text]）を適用できる
  - 複数アイテムにまたがる選択範囲のフォーマットを変更できる
  tests:
  - client/e2e/core/SLR-0010.spec.ts
- id: SLR-0100
  title: ボックス選択（矩形選択）機能 - キーボード
  shortcut: Alt+Shift+矢印キー
  description: Alt+Shift+矢印キーによる矩形選択機能
  category: selection-range
  status: implemented
  acceptance:
  - Alt+Shift+矢印キーで矩形選択を開始できる
  - Escキーで矩形選択をキャンセルできる
  - 矩形選択の範囲が視覚的に表示される
  - 矩形選択の範囲を矢印キーで拡張できる
  - 矩形選択範囲にテキストをペーストできる
  - 矩形選択範囲のテキストをコピーできる
  - 複数アイテムにまたがる矩形選択を作成できる
  tests:
  - client/e2e/core/SLR-0100.spec.ts
- id: SLR-0101
  title: ボックス選択（矩形選択）機能 - マウス
  shortcut: Alt+Shift+ドラッグ
  description: Alt+Shift+マウスドラッグによる矩形選択機能
  category: selection-range
  status: implemented
  acceptance:
  - Alt+Shift+マウスドラッグで矩形選択を開始できる
  - 矩形選択の範囲がドラッグに合わせて拡張される
  - 矩形選択の範囲が視覚的に表示される
  - 矩形選択範囲にテキストをペーストできる
  - 矩形選択範囲のテキストをコピーできる
  - 矩形選択範囲のテキストを削除できる
  - 複数アイテムにまたがる矩形選択を作成できる
  tests:
  - client/e2e/core/SLR-0101.spec.ts
- id: SRE-001
  title: Advanced Search & Replace
  description: 正規表現や範囲指定に対応した検索・置換機能
  category: search
  status: implemented
  components:
  - client/src/components/SearchPanel.svelte
  - client/src/lib/search/index.ts
  - client/src/routes/[project]/[page]/+page.svelte
  tests:
  - client/e2e/new/SRE-001.spec.ts
- id: TBL-0001
  title: Editable JOIN Table
  description: SQL query results editable via Fluid Framework and SQLite cache
  category: table
  status: implemented
  components:
  - src/components/ChartPanel.svelte
  - src/components/EditableQueryGrid.svelte
  - src/components/QueryEditor.svelte
  services:
  - src/services/sqlService.ts
  - src/services/editMapper.ts
  - src/services/syncWorker.ts
  tests:
  - client/e2e/new/TBL-0001.spec.ts
  - src/tests/editMapper.test.ts
  - src/tests/sqlService.test.ts
  - src/tests/syncWorker.test.ts
  acceptance:
  - JOINクエリで編集した値が正しいテーブルに反映される
  - PKエイリアスを利用してJOIN結果の各行が編集対象テーブルに正しくマッピングされる
  - SQLクエリ結果をグリッド表示する
  - クエリ実行後、ChartPanelが表示される
  - セル編集後、ChartPanelに変更が表示される
  - セル編集後、queryStoreのデータが更新される
  - セル編集後に再実行したクエリ結果も更新される
  - 編集内容がFluid経由で同期される
  - 編集後チャートが自動更新される
- id: TST-0001
  title: SharedTreeデータ検証ユーティリティ
  description: テストにおいてSharedTreeの内容をJSONとして取得し、結果を厳密かつ簡易に判定するユーティリティ
  category: testing
  status: implemented
  acceptance:
  - SharedTreeのデータ構造をJSON形式で取得できる
  - スナップショットを取得して後で比較できる
  - ネストされた構造（親子関係）を正確に検証できる
  - 期待値と実際の値を厳密に比較できる
  - 期待値と実際の値を部分的に比較できる
  - 特定のパスのデータを検証できる
  - 特定のパスを無視して比較できる
  tests:
  - client/e2e/utils/tree-validation.spec.ts
  examples:
  - client/e2e/utils/tree-validator-examples.ts
  - client/e2e/utils/tree-validator-usage.md
- id: TST-0002
  title: カーソル情報検証ユーティリティ
  description: テストにおいてカーソル情報をJSONとして取得し、結果を厳密かつ簡易に判定するユーティリティ
  category: testing
  status: implemented
  acceptance:
  - アクティブなアイテムIDを検証できる
  - カーソルの数を検証できる
  - カーソル情報をJSON形式で取得できる
  - スナップショットを取得して後で比較できる
  - 期待値と実際の値を厳密に比較できる
  - 期待値と実際の値を部分的に比較できる
  - 特定のパスのデータを検証できる
  tests:
  - client/e2e/utils/cursor-validation.spec.ts
  examples:
  - client/e2e/utils/cursor-validator-examples.ts
  - client/e2e/utils/cursor-validator-usage.md
- id: TST-0003
  title: テストヘルパーユーティリティ
  description: テストにおいてカーソル状態の検証を容易にするヘルパー関数群
  category: testing
  status: implemented
  acceptance:
  - DOM要素の可視性を強制的に確認できる（forceCheckVisibility）
  - class:editingセレクタの代わりにカーソル状態を検証できる
  - アイテムをクリックして編集モードに入れる（clickItemToEdit）
  - アクティブなアイテムIDを取得できる（getActiveItemId）
  - アクティブなアイテム要素を取得できる（getActiveItemLocator）
  - カーソルが表示されるまで待機できる（waitForCursorVisible）
  - カーソルデバッグ機能をセットアップできる（setupCursorDebugger）
  - バックリンクパネルを開くことができる（openBacklinkPanel）
  - マウスアウトイベントを強制的にシミュレートできる（forceMouseOutEvent）
  - マウスオーバーイベントを強制的にシミュレートできる（forceHoverEvent）
  - リンクプレビューを強制的に表示できる（forceLinkPreview）
  tests:
  - client/e2e/auth/auth.spec.ts
  - client/e2e/core/CLM-0001.spec.ts
  - client/e2e/core/CLM-0002.spec.ts
  - client/e2e/core/CLM-0003.spec.ts
  - client/e2e/core/CLM-0004.spec.ts
  - client/e2e/core/CLM-0005.spec.ts
  - client/e2e/core/CLM-0007.spec.ts
  - client/e2e/core/CLM-0008.spec.ts
  - client/e2e/core/CLM-0100.spec.ts
  - client/e2e/core/CLM-0101.spec.ts
  - client/e2e/core/CLM-0103.spec.ts
  - client/e2e/core/FMT-0006.spec.ts
  - client/e2e/core/IME-0001.spec.ts
  - client/e2e/core/ITM-0001-title.spec.ts
  - client/e2e/core/ITM-0001.spec.ts
  - client/e2e/core/SLR-0003.spec.ts
  - client/e2e/core/SLR-0004.spec.ts
  - client/e2e/core/SLR-0005.spec.ts
  - client/e2e/core/SLR-0010.spec.ts
  - client/e2e/core/add-text.spec.ts
  - client/e2e/core/tinylicious.spec.ts
  examples:
  - client/e2e/utils/testHelpers.ts
- id: TST-0004
  title: テスト環境の改善
  description: テスト環境の安定性と信頼性を向上させるための改善
  category: testing
  status: implemented
  acceptance:
  - DOM要素の検出と操作のためのヘルパー関数を提供する
  - テスト実行時のタイムアウト設定を延長し、テストの安定性を向上させる
  - テスト環境の制約を考慮したテスト条件の調整を行う
  - マウスイベントが正確に動作しない場合に代替手段を提供する
  - 要素の検出待機のタイムアウト設定を延長し、テストの安定性を向上させる
  tests:
  - client/e2e/core/LNK-0005.spec.ts
  - client/e2e/core/LNK-0007.spec.ts
  notes:
  - テスト環境ではマウスイベントやDOM要素の検出が不安定な場合があるため、専用のヘルパー関数を使用してテストを安定化
  - headlessモードでの実行時に一部の機能が正常に動作しない場合があるため、代替手段を提供
- id: TST-0005
  title: テスト環境の初期化と準備
  description: テスト実行前の環境準備を改善し、テストの安定性と再現性を向上させる
  category: testing
  status: implemented
  acceptance:
  - DOM要素の検出問題を解決するための改善されたヘルパー関数を提供する
  - UI操作ではなくFluid APIを使用して直接データを作成することで安定性を向上させる
  - テスト実行前にプロジェクトとページを自動的に作成する仕組みを提供する
  - テスト環境の初期化を一貫した方法で行うヘルパー関数を提供する
  - テスト間の依存関係を減らし、各テストが独立して実行できるようにする
  tests:
  - client/e2e/helpers.ts
  - client/e2e/utils/linkTestHelpers.ts
  - client/e2e/utils/testHelpers.ts
  notes:
  - テスト環境では要素の検出が不安定な場合があるため、再試行機能を持つヘルパー関数を使用してテストを安定化
  - テストデータの作成にはUI操作ではなくFluid APIを使用し、テストの安定性を向上
  - テスト前の環境準備を標準化することで、テスト間の依存関係を減少
- id: USR-0001
  title: ユーザー削除機能
  description: ユーザーアカウントとそれに関連するデータを削除する機能
  category: user-management
  status: implemented
  acceptance:
  - Firebase Authからユーザーアカウントが削除される
  - ユーザーがアクセス可能だったコンテナからユーザーIDが削除される
  - ユーザーが最後のアクセス者だったコンテナは完全に削除される
  - ユーザーに関連するコンテナ情報が削除される
  - ユーザーアカウントを削除できる
  tests:
  - client/e2e/core/USR-0001.spec.ts
- id: USR-0002
  title: コンテナ削除機能
  description: コンテナとそれに関連するデータを削除する機能
  category: container-management
  status: implemented
  acceptance:
  - コンテナがデフォルトコンテナだった場合、ユーザーのデフォルトコンテナが更新される
  - コンテナが存在しない場合は適切なエラーメッセージが表示される
  - コンテナにアクセス可能だったユーザーのアクセス権からコンテナIDが削除される
  - コンテナへのアクセス権がない場合は適切なエラーメッセージが表示される
  - コンテナを削除できる
  tests:
  - client/e2e/core/USR-0002.spec.ts
- id: ALIAS-0001
  title: Alias References
  description: 別のアイテムをUUIDで参照し内容を表示するエイリアス機能
  category: editor
  status: implemented
  tests:
  - client/src/tests/alias.test.ts
