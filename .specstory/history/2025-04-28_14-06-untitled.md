<!-- Generated by SpecStory -->

# Untitled (2025-04-28 23:06:33)

_**User**_

git --no-pager diff --staged -- . ':(exclude)/workspace/.specstory' ':(exclude)/workspace/chat.txt' ':(exclude)/workspace/tips.txt'
ã§å¤‰æ›´ç‚¹ã‚’ç¢ºèªã—ã¦ã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è‹±èªã§æ›¸ã„ã¦ã€ã‚³ãƒŸãƒƒãƒˆã—ã¦ä¸‹ã•ã„ã€‚ã€‚

---

_**Assistant**_

```bash
git --no-pager diff --staged -- . ':(exclude)/workspace/.specstory' ':(exclude)/workspace/chat.txt' ':(exclude)/workspace/tips.txt'
```

````
-        store.startCursorBlink();
-        return;
-    }
-    // ãã®ä»–ã®ã‚­ãƒ¼ã¯ç‚¹æ»…ã®ã¿é€£å‹•
-    store.startCursorBlink();
+// global textarea ã‚’ã‚¹ãƒˆã‚¢ã«ç™»éŒ²
+onMount(() => {
+    store.setTextareaRef(textareaRef);
+});
+
+onDestroy(() => {
+    store.setTextareaRef(null);
+});
+
+// ã‚­ãƒ¼ãƒ€ã‚¦ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã‚’ KeyEventHandler ã¸å§”è­²
+function handleKeyDown(event: KeyboardEvent) {
+    KeyEventHandler.handleKeyDown(event);
 }
 
-// å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚¹ãƒˆã‚¢çµŒç”±ã§ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
-function handleInput(event: any) {
-    // å®Ÿè£…ã¯å¾Œç¶šã§å…·ä½“åŒ–
+// å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’ KeyEventHandler ã¸å§”è­²
+function handleInput(event: Event) {
+    KeyEventHandler.handleInput(event);
 }
 </script>
 
diff --git a/client/src/components/OutlinerBase.svelte b/client/src/components/OutlinerBase.svelte
new file mode 100644
index 0000000..dad94eb
--- /dev/null
+++ b/client/src/components/OutlinerBase.svelte
@@ -0,0 +1,28 @@
+<script lang="ts">
+import { onMount } from "svelte";
+import type { Item } from "../schema/app-schema";
+import { editorOverlayStore } from "../stores/EditorOverlayStore.svelte";
+import { fluidStore } from "../stores/fluidStore.svelte";
+import GlobalTextArea from "./GlobalTextArea.svelte";
+import OutlinerTree from "./OutlinerTree.svelte";
+
+interface Props {
+    pageItem: Item;
+    isReadOnly?: boolean;
+}
+let { pageItem, isReadOnly = false }: Props = $props();
+
+onMount(() => {
+    // editorOverlayStoreã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦åˆæœŸã‚«ãƒ¼ã‚½ãƒ«ã‚’è¨­å®š
+    editorOverlayStore.reset();
+    editorOverlayStore.setActiveItem(pageItem.id);
+    const offset = pageItem.text?.length ?? 0;
+    const userId = fluidStore.currentUser?.id ?? "anonymous";
+    editorOverlayStore.addCursor({ itemId: pageItem.id, offset, isActive: true, userId });
+});
+</script>
+
+<div class="outliner-base" data-testid="outliner-base">
+    <GlobalTextArea />
+    <OutlinerTree {pageItem} {isReadOnly} />
+</div>
diff --git a/client/src/components/OutlinerItem.svelte b/client/src/components/OutlinerItem.svelte
index f112290..ad57a59 100644
--- a/client/src/components/OutlinerItem.svelte
+++ b/client/src/components/OutlinerItem.svelte
@@ -53,14 +53,22 @@
     }
        );
 
-       // éš ã—ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ref
-       let hiddenTextareaRef: HTMLTextAreaElement;
        // è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ref
        let displayRef: HTMLDivElement;
        // ã‚¢ã‚¤ãƒ†ãƒ å…¨ä½“ã®DOMã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®ref
        let itemRef: HTMLDivElement;
        let lastHeight = 0;
 
+       // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®å‚ç…§
+       let hiddenTextareaRef: HTMLTextAreaElement;
+
+       // ã‚°ãƒ­ãƒ¼ãƒãƒ« textarea è¦ç´ ã‚’å‚ç…§ã«ã‚»ãƒƒãƒˆ
+       onMount(() => {
+               const globalTextarea = document.querySelector('.global-textarea') as HTMLTextAreaElement;
+               if (!globalTextarea) return;
+               hiddenTextareaRef = globalTextarea;
+       });
+
        function getClickPosition(event: MouseEvent, content: string): number {
                const x = event.clientX;
                const y = event.clientY;
@@ -119,10 +127,21 @@
        function startEditing(event?: MouseEvent, initialCursorPosition?: number) {
                if (isReadOnly) return;
                isEditing = true;
-
-               // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®å†…å®¹ã‚’åŒæœŸ
-               hiddenTextareaRef.value = text.current;
-               hiddenTextareaRef.focus();
+
+               // ã‚°ãƒ­ãƒ¼ãƒãƒ« textarea ã‚’å–å¾—ï¼ˆã‚¹ãƒˆã‚¢ã‹ã‚‰ã€ãªã‘ã‚Œã°DOMã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
+               let textareaEl = editorOverlayStore.getTextareaRef();
+               if (!textareaEl) {
+                       textareaEl = document.querySelector('.global-textarea') as HTMLTextAreaElement | null;
+                       if (!textareaEl) {
+                               console.error('Global textarea not found');
+                               return;
+                       }
+                       // ã‚¹ãƒˆã‚¢ã«å†ç™»éŒ²
+                       editorOverlayStore.setTextareaRef(textareaEl);
+               }
+               // ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã‚’åŒæœŸ
+               textareaEl.value = text.current;
+               textareaEl.focus();
 
                let cursorPosition = initialCursorPosition;
 
@@ -135,7 +154,8 @@
                }
 
                if (cursorPosition !== undefined) {
-                       hiddenTextareaRef.setSelectionRange(cursorPosition, cursorPosition);
+                       // ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’ textarea ã«è¨­å®š
+                       textareaEl.setSelectionRange(cursorPosition, cursorPosition);
                        selectionStart = selectionEnd = cursorPosition;
                }
 
@@ -183,156 +203,6 @@
                }
        }
 
-       // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ç”¨ã®ã‚­ãƒ¼ãƒ€ã‚¦ãƒ³ãƒãƒ³ãƒ‰ãƒ©
-       function handleKeyDown(event: KeyboardEvent) {
-               // â†â†’ã‚­ãƒ¼æŠ¼ä¸‹æ™‚ã¯æ—¢å­˜ã‚«ãƒ¼ã‚½ãƒ«ã‚’æ›´æ–°ã—ã¦è¿½åŠ ã‚’é˜²æ­¢
-               if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
-                       event.preventDefault();
-                       event.stopPropagation();
-                       const { cursors } = editorOverlayStore.getItemCursorsAndSelections(model.id);
-                       cursors.forEach(c => {
-                               const newOffset = event.key === 'ArrowLeft'
-                                       ? Math.max(0, c.offset - 1)
-                                       : c.offset + 1;
-                               editorOverlayStore.updateCursor({ ...c, offset: newOffset, isActive: true });
-                       });
-                       editorOverlayStore.startCursorBlink();
-                       return;
-               }
-               if (!isEditing) return;
-
-               if (typeof window !== 'undefined' && (window as any).DEBUG_MODE) {
-                       console.log(`KeyDown in item: ${model.id}, key: ${event.key}, shift: ${event.shiftKey}`);
-               }
-
-               // ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã¨é¸æŠç¯„å›²ã‚’ä¿å­˜
-               const currentSelectionStart = hiddenTextareaRef.selectionStart || 0;
-               const currentSelectionEnd = hiddenTextareaRef.selectionEnd || 0;
-               const currentSelectionDirection = hiddenTextareaRef.selectionDirection;
-
-               lastSelectionStart = currentSelectionStart;
-               lastSelectionEnd = currentSelectionEnd;
-               lastCursorPosition = currentSelectionDirection === 'forward' ? 
-                       currentSelectionEnd : currentSelectionStart;
-
-               // ã‚¢ã‚¤ãƒ†ãƒ é–“ç§»å‹•ç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«
-               if (event.key === 'ArrowUp' && isAtFirstLine()) {
-                       event.preventDefault();
-                       event.stopPropagation();
-                       const cursorScreenX = calculateCursorScreenPosition(currentSelectionStart);
-                       dispatch('navigate-to-item', {
-                               direction: 'up',
-                               itemId: model.id,
-                               cursorScreenX,
-                               fromItemId: model.id,
-                               shiftKey: event.shiftKey
-                       });
-                       return;
-               }
-               if (event.key === 'ArrowDown' && isAtLastLine()) {
-                       event.preventDefault();
-                       event.stopPropagation();
-                       const cursorScreenX = calculateCursorScreenPosition(currentSelectionStart);
-                       dispatch('navigate-to-item', {
-                               direction: 'down',
-                               itemId: model.id,
-                               cursorScreenX,
-                               fromItemId: model.id,
-                               shiftKey: event.shiftKey
-                       });
-                       return;
-               }
-
-               // çŸ¢å°ã‚­ãƒ¼å‡¦ç†
-               if (event.key === 'ArrowLeft') {
-                       if (currentSelectionStart === 0 && currentSelectionEnd === 0) {
-                               // ãƒ†ã‚­ã‚¹ãƒˆã®å…ˆé ­ã«ã„ã‚‹å ´åˆã¯å·¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã«ç§»å‹•
-                               event.preventDefault();
-                               event.stopPropagation();
-
-                               if (typeof window !== 'undefined' && (window as any).DEBUG_MODE) {
-                                       console.log(`Left navigation from text start`);
-                               }
-
-                               // å·¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã®æœ«å°¾ã«ç§»å‹•ã™ã‚‹ãŸã‚ã®ç‰¹æ®Šãªå€¤
-                               const targetScreenX = Number.MAX_SAFE_INTEGER;
-
-                               finishEditing();
-                               dispatch('navigate-to-item', { 
-                                       direction: 'left', 
-                                       itemId: model.id,
-                                       cursorScreenX: targetScreenX,
-                                       fromItemId: model.id 
-                               });
-                               return;
-                       }
-               } else if (event.key === 'ArrowRight') {
-                       if (currentSelectionStart === hiddenTextareaRef.value.length && 
-                               currentSelectionEnd === hiddenTextareaRef.value.length) {
-                               // ãƒ†ã‚­ã‚¹ãƒˆã®æœ«å°¾ã«ã„ã‚‹å ´åˆã¯å³ã®ã‚¢ã‚¤ãƒ†ãƒ ã«ç§»å‹•
-                               event.preventDefault();
-                               event.stopPropagation();
-
-                               if (typeof window !== 'undefined' && (window as any).DEBUG_MODE) {
-                                       console.log(`Right navigation from text end`);
-                               }
-
-                               // å³ã®ã‚¢ã‚¤ãƒ†ãƒ ã®å…ˆé ­ã«ç§»å‹•ã™ã‚‹ãŸã‚ã®ç‰¹æ®Šãªå€¤
-                               const targetScreenX = 0;
-
-                               finishEditing();
-                               dispatch('navigate-to-item', { 
-                                       direction: 'right', 
-                                       itemId: model.id,
-                                       cursorScreenX: targetScreenX,
-                                       fromItemId: model.id 
-                               });
-                               return;
-                       }
-               } else if (event.key === 'Enter' && !event.shiftKey) {
-                       event.preventDefault();
-
-                       if (isPageTitle) {
-                               // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã®å ´åˆã€å­ã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦è¿½åŠ 
-                               finishEditing();
-                               addNewItem();
-                       } else {
-                               // é€šå¸¸ã‚¢ã‚¤ãƒ†ãƒ ã®å ´åˆã€åŒã˜éšå±¤ã«æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ 
-                               finishEditing();
-                               dispatch('add-sibling', { itemId: model.id });
-                       }
-                       return;
-               } else if (event.key === 'Escape') {
-                       // Escapeå‡¦ç†
-                       event.preventDefault();
-                       finishEditing();
-                       return;
-               } else if (event.key === 'Tab') {
-                       // Tabå‡¦ç†
-                       event.preventDefault();
-                       event.stopPropagation();
-
-                       if (event.shiftKey) {
-                               dispatch('unindent', { itemId: model.id });
-                       } else {
-                               dispatch('indent', { itemId: model.id });
-                       }
-
-                       logger.info('Tab key processed in textarea');
-                       return;
-               }
-
-               // çŸ¢å°ã‚­ãƒ¼å‡¦ç†å¾Œã®ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®æ›´æ–°
-               if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Home', 'End'].includes(event.key)) {
-                       editorOverlayStore.startCursorBlink();
-                       requestAnimationFrame(() => {
-                               if (!event.defaultPrevented) {
-                                       updateSelectionAndCursor(event.shiftKey);
-                               }
-                       });
-               }
-       }
-
        // ã‚«ãƒ¼ã‚½ãƒ«ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åº§æ¨™ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°
        function calculateCursorScreenPosition(cursorPos: number): number | null {
                if (!displayRef) return null;
@@ -518,102 +388,6 @@
                }
        }
 
-       // éš ã— textarea ã‹ã‚‰ã®å…¥åŠ›ã‚’å—ã‘ã€ãƒãƒ«ãƒã‚«ãƒ¼ã‚½ãƒ«å¯¾å¿œã® insertText ã‚’é©ç”¨ã™ã‚‹
-       function handleInput(event: any) {
-               const ev = event as InputEvent;
-               // ç¯„å›²é¸æŠï¼‹Delete ã®åŒæ™‚å‰Šé™¤
-               const selStart = hiddenTextareaRef.selectionStart ?? 0;
-               const selEnd = hiddenTextareaRef.selectionEnd ?? 0;
-               if ((ev.inputType === 'deleteContentBackward' || ev.inputType === 'deleteContentForward') && selStart !== selEnd) {
-                       // é¸æŠç¯„å›²ã‚’å‰Šé™¤
-                       let newText = text.current;
-                       newText = newText.slice(0, selStart) + newText.slice(selEnd);
-                       text.current = newText;
-                       hiddenTextareaRef.value = newText;
-                       // ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã‚¯ãƒªã‚¢ã—ã¦å…ˆé ­ä½ç½®ã«å†ç”Ÿæˆ
-                       editorOverlayStore.clearCursorForItem(model.id);
-                       editorOverlayStore.setActiveItem(model.id);
-                       editorOverlayStore.setCursor({
-                               itemId: model.id,
-                               offset: selStart,
-                               isActive: true,
-                               userId: 'local'
-                       });
-                       editorOverlayStore.startCursorBlink();
-                       return;
-               }
-               // Enter ã®åŒæ™‚æŒ¿å…¥
-               if (ev.inputType === 'insertLineBreak') {
-                       const ch = '\n';
-                       const cursors = editorOverlayStore.getItemCursorsAndSelections(model.id).cursors;
-                       cursors.sort((a, b) => b.offset - a.offset);
-                       let newText = text.current;
-                       cursors.forEach(c => {
-                               newText = newText.slice(0, c.offset) + ch + newText.slice(c.offset);
-                       });
-                       text.current = newText;
-                       cursors.forEach(c => {
-                               editorOverlayStore.updateCursor({ ...c, offset: c.offset + ch.length, isActive: true });
-                       });
-                       hiddenTextareaRef.value = newText;
-                       editorOverlayStore.startCursorBlink();
-               }
-               // Backspace/Delete ã®åŒæ™‚å‰Šé™¤
-               else if (ev.inputType === 'deleteContentBackward' || ev.inputType === 'deleteContentForward') {
-                       const backward = ev.inputType === 'deleteContentBackward';
-                       const cursors = editorOverlayStore.getItemCursorsAndSelections(model.id).cursors;
-                       // ãƒãƒƒã‚¯ãƒ¯ãƒ¼ãƒ‰ã¯å‰æ–¹ã€å°ã•ã„ã‚ªãƒ•ã‚»ãƒƒãƒˆé †ã€‚ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¯å¾Œæ–¹ã€å¤§ãã„ã‚ªãƒ•ã‚»ãƒƒãƒˆé †
-                       cursors.sort((a, b) => backward ? a.offset - b.offset : b.offset - a.offset);
-                       let newText = text.current;
-                       cursors.forEach(c => {
-                               let idx = c.offset;
-                               const delPos = backward ? idx - 1 : idx;
-                               if (delPos < 0 || delPos >= newText.length) return;
-                               newText = newText.slice(0, delPos) + newText.slice(delPos + 1);
-                               const newOffset = backward ? Math.max(0, idx - 1) : idx;
-                               editorOverlayStore.updateCursor({ ...c, offset: newOffset, isActive: true });
-                       });
-                       text.current = newText;
-                       hiddenTextareaRef.value = newText;
-                       editorOverlayStore.startCursorBlink();
-               }
-               // é€šå¸¸ã®å…¥åŠ› (insertText) ã¯å¾“æ¥é€šã‚Š
-               else if (ev.inputType === 'insertText' && ev.data) {
-                       const ch = ev.data;
-                       // ã“ã®ã‚¢ã‚¤ãƒ†ãƒ ã«ç´ã¥ãå…¨ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’å–å¾—
-                       const cursors = editorOverlayStore.getItemCursorsAndSelections(model.id).cursors;
-                       // å¾Œã‚ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆã‹ã‚‰é †ã«å‡¦ç†ã—ãªã„ã¨ã‚ºãƒ¬ã‚‹ã®ã§é™é †ã‚½ãƒ¼ãƒˆ
-                       cursors.sort((a, b) => b.offset - a.offset);
-
-                       // SharedTree ã¨ text.current ã‚’ immutably æ›´æ–°
-                       let newText = text.current;
-                       cursors.forEach(c => {
-                               newText = newText.slice(0, c.offset) + ch + newText.slice(c.offset);
-                       });
-                       text.current = newText;
-
-                       // å„ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’æŒ¿å…¥å¾Œã®ä½ç½®ã«æ›´æ–°
-                       cursors.forEach(c => {
-                               editorOverlayStore.updateCursor({
-                                       ...c,
-                                       offset: c.offset + ch.length,
-                                       isActive: true
-                               });
-                       });
-
-                       // éš ã— textarea ã®å€¤ã‚‚æœ€æ–°åŒ–
-                       hiddenTextareaRef.value = newText;
-                       // ã‚«ãƒ¼ã‚½ãƒ«ç‚¹æ»…
-                       editorOverlayStore.startCursorBlink();
-               } else {
-                       // é€šå¸¸å…¥åŠ›ä»¥å¤–ã¯å¾“æ¥é€šã‚Š
-                       text.current = hiddenTextareaRef.value;
-                       requestAnimationFrame(() => {
-                               updateSelectionAndCursor();
-                       });
-               }
-       }
-
        function finishEditing() {
                isEditing = false;
                editorOverlayStore.stopCursorBlink();
@@ -976,44 +750,6 @@
                editorOverlayStore.startCursorBlink();
        }
 
-       // ã‚¢ã‚¤ãƒ†ãƒ ã®ç·¨é›†ã‚’é–‹å§‹ã—ã€ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’æŒ‡å®šã™ã‚‹
-       export function startEditingWithPosition(position: 'start' | 'end' | number = 'end') {
-               if (isReadOnly || isEditing) return;
-
-               isEditing = true;
-               hiddenTextareaRef.value = text.current;
-               hiddenTextareaRef.focus();
-
-               let cursorPosition: number;
-
-               if (position === 'start') {
-                       cursorPosition = 0;
-               } else if (position === 'end') {
-                       cursorPosition = text.current.length;
-               } else if (typeof position === 'number') {
-                       // 0ï½1ã®ç›¸å¯¾ä½ç½®ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆ
-                       if (position >= 0 && position <= 1) {
-                               cursorPosition = Math.round(text.current.length * position);
-                       } else {
-                               // çµ¶å¯¾ä½ç½®ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆ
-                               cursorPosition = Math.min(Math.max(0, position), text.current.length);
-                       }
-               } else {
-                       cursorPosition = text.current.length;
-               }
-
-               setSelectionPosition(cursorPosition);
-
-               editorOverlayStore.setCursor({
-                       itemId: model.id,
-                       offset: cursorPosition,
-                       isActive: true,
-                       userId: 'local'
-               });
-
-               // é‡è¦: ã‚«ãƒ¼ã‚½ãƒ«ç‚¹æ»…ã‚’é–‹å§‹
-               editorOverlayStore.startCursorBlink();
-       }
 
        // ä»–ã®ã‚¢ã‚¤ãƒ†ãƒ ã«ç§»å‹•ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã™ã‚‹
        function navigateToItem(direction: "up" | "down" | "left" | "right") {
@@ -1119,14 +855,6 @@
                {/if}
 
                <div class="item-content-container">
-                       <!-- éš ã—ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ -->
-                       <textarea
-                               bind:this={hiddenTextareaRef}
-                               class="hidden-textarea"
-                               on:keydown={handleKeyDown}
-                               on:input={handleInput}
-                       ></textarea>
-
                        <!-- è¡¨ç¤ºç”¨ã®è¦ç´  -->
                        <div
                                bind:this={displayRef}
@@ -1134,12 +862,7 @@
                                class:page-title-content={isPageTitle}
                                class:editing={isEditing}
                        >
-                               {#if text.current}
                                        <span class="item-text" class:title-text={isPageTitle}>{text.current}</span>
-                               {:else}
-                                       <span class="empty-text">{isPageTitle ? 'ç„¡é¡Œã®ãƒšãƒ¼ã‚¸' : 'ç©ºç™½ã®ãƒãƒ¼ãƒˆ'}</span>
-                               {/if}
-
                                {#if !isPageTitle && model.votes.length > 0}
                                        <span class="vote-count">{model.votes.length}</span>
                                {/if}
@@ -1208,21 +931,6 @@
                flex-direction: column;
        }
 
-       .hidden-textarea {
-               position: absolute;
-               top: 0;
-               left: 0;
-               width: 100%;
-               height: 100%;
-               opacity: 0;
-               overflow: hidden;
-               padding: 0;
-               resize: none;
-               z-index: 0;
-               white-space: pre;
-               pointer-events: auto;
-       }
-
        .item-content {
                position: relative;
                cursor: text;
diff --git a/client/src/lib/Cursor.ts b/client/src/lib/Cursor.ts
new file mode 100644
index 0000000..00db505
--- /dev/null
+++ b/client/src/lib/Cursor.ts
@@ -0,0 +1,152 @@
+import type { Item } from "../schema/app-schema";
+import { editorOverlayStore as store } from "../stores/EditorOverlayStore.svelte";
+import { store as generalStore } from "../stores/store.svelte";
+
+export interface CursorOptions {
+    itemId: string;
+    offset: number;
+    isActive: boolean;
+    userId: string;
+}
+
+export class Cursor {
+    cursorId: string;
+    itemId: string;
+    offset: number;
+    isActive: boolean;
+    userId: string;
+
+    constructor(cursorId: string, opts: CursorOptions) {
+        this.cursorId = cursorId;
+        this.itemId = opts.itemId;
+        this.offset = opts.offset;
+        this.isActive = opts.isActive;
+        this.userId = opts.userId;
+    }
+
+    // SharedTree ä¸Šã® Item ã‚’å†å¸°æ¤œç´¢
+    private findTarget(): Item | undefined {
+        const root = generalStore.currentPage;
+        if (!root) return undefined;
+        return this.searchItem(root, this.itemId);
+    }
+
+    private searchItem(node: Item, id: string): Item | undefined {
+        if (node.id === id) return node;
+        for (const child of node.items as Iterable<Item>) {
+            const found = this.searchItem(child, id);
+            if (found) return found;
+        }
+        return undefined;
+    }
+
+    private applyToStore() {
+        store.updateCursor({
+            cursorId: this.cursorId,
+            itemId: this.itemId,
+            offset: this.offset,
+            isActive: this.isActive,
+            userId: this.userId,
+        });
+    }
+
+    moveLeft() {
+        if (this.offset > 0) {
+            this.offset = Math.max(0, this.offset - 1);
+        }
+        else {
+            // è¡Œé ­ã§å‰ã‚¢ã‚¤ãƒ†ãƒ ã¸ç§»å‹•
+            this.navigateToItem("left");
+        }
+        this.applyToStore();
+    }
+
+    moveRight() {
+        const target = this.findTarget();
+        const text = target?.text ?? "";
+        if (this.offset < text.length) {
+            this.offset = this.offset + 1;
+        }
+        else {
+            // è¡Œæœ«ã§æ¬¡ã‚¢ã‚¤ãƒ†ãƒ ã¸ç§»å‹•
+            this.navigateToItem("right");
+        }
+        this.applyToStore();
+    }
+
+    insertText(ch: string) {
+        const node = this.findTarget();
+        if (!node) return;
+        let txt = node.text;
+        // è¤‡æ•°ã‚«ãƒ¼ã‚½ãƒ«è€ƒæ…®ã¯å‘¼ã³å‡ºã—å´ã§ã¾ã¨ã‚ã¦è¡Œã†
+        txt = txt.slice(0, this.offset) + ch + txt.slice(this.offset);
+        node.updateText(txt);
+        this.offset += ch.length;
+        this.applyToStore();
+    }
+
+    deleteBackward() {
+        const node = this.findTarget();
+        if (!node) return;
+        let txt = node.text;
+        if (this.offset > 0) {
+            const pos = this.offset - 1;
+            txt = txt.slice(0, pos) + txt.slice(pos + 1);
+            node.updateText(txt);
+            this.offset = Math.max(0, this.offset - 1);
+            this.applyToStore();
+        }
+        else {
+            // è¡Œé ­ã§å‰ã‚¢ã‚¤ãƒ†ãƒ ã¸ã®çµ±åˆãªã©å¿…è¦ãªã‚‰å®Ÿè£…
+        }
+    }
+
+    deleteForward() {
+        const node = this.findTarget();
+        if (!node) return;
+        let txt = node.text;
+        if (this.offset < txt.length) {
+            txt = txt.slice(0, this.offset) + txt.slice(this.offset + 1);
+            node.updateText(txt);
+            this.applyToStore();
+        }
+        else {
+            // è¡Œæœ«ã§æ¬¡ã‚¢ã‚¤ãƒ†ãƒ ã¸ã®çµ±åˆãªã‚‰
+        }
+    }
+
+    insertLineBreak() {
+        this.insertText("\n");
+    }
+
+    onInput(event: InputEvent) {
+        const data = event.data;
+        if (data) {
+            this.insertText(data);
+        }
+    }
+
+    private navigateToItem(direction: "left" | "right") {
+        const x = this.calculateScreenX();
+        // å‰å¾Œã‚¢ã‚¤ãƒ†ãƒ ã¸ã®ç§»å‹•ã¯ã‚¹ãƒˆã‚¢æ›´æ–°ã®ã¿è¡Œã„ã€ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å‡¦ç†
+        store.clearCursorForItem(this.itemId);
+        store.setActiveItem(this.itemId);
+        store.startCursorBlink();
+        // navigation event dispatch should be managed by GlobalTextArea or parent component
+    }
+
+    private calculateScreenX(): number | null {
+        const el = document.querySelector(`[data-item-id="${this.itemId}"] .item-text`) as HTMLElement;
+        if (!el) return null;
+        const range = document.createRange();
+        const textNode = Array.from(el.childNodes).find(n => n.nodeType === Node.TEXT_NODE);
+        if (textNode && textNode.textContent) {
+            const pos = Math.min(this.offset, textNode.textContent.length);
+            range.setStart(textNode, pos);
+            range.setEnd(textNode, pos);
+            const rect = range.getBoundingClientRect();
+            return rect.left;
+        }
+        return null;
+    }
+}
diff --git a/client/src/lib/KeyEventHandler.ts b/client/src/lib/KeyEventHandler.ts
new file mode 100644
index 0000000..17f3ae5
--- /dev/null
+++ b/client/src/lib/KeyEventHandler.ts
@@ -0,0 +1,49 @@
+import { editorOverlayStore as store } from "../stores/EditorOverlayStore.svelte";
+
+/**
+ * ã‚­ãƒ¼ãŠã‚ˆã³å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’å„ã‚«ãƒ¼ã‚½ãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹ãƒãƒ³ãƒ‰ãƒ©
+ */
+export class KeyEventHandler {
+    /**
+     * KeyDown ã‚¤ãƒ™ãƒ³ãƒˆã‚’å„ã‚«ãƒ¼ã‚½ãƒ«ã«å§”è­²
+     */
+    static handleKeyDown(event: KeyboardEvent) {
+        const cursorInstances = store.getCursorInstances();
+        switch (event.key) {
+            case "ArrowLeft":
+                cursorInstances.forEach(cursor => cursor.moveLeft());
+                break;
+            case "ArrowRight":
+                cursorInstances.forEach(cursor => cursor.moveRight());
+                break;
+            case "Backspace":
+                cursorInstances.forEach(cursor => cursor.deleteBackward());
+                break;
+            case "Delete":
+                cursorInstances.forEach(cursor => cursor.deleteForward());
+                break;
+            case "Enter":
+                if (event.shiftKey) {
+                    cursorInstances.forEach(cursor => cursor.insertLineBreak());
+                }
+                else {
+                    cursorInstances.forEach(cursor => cursor.insertLineBreak());
+                }
+                break;
+            default:
+                return;
+        }
+        store.startCursorBlink();
+        event.preventDefault();
+        event.stopPropagation();
+    }
+
+    /**
+     * Input ã‚¤ãƒ™ãƒ³ãƒˆã‚’å„ã‚«ãƒ¼ã‚½ãƒ«ã«å§”è­²
+     */
+    static handleInput(event: Event) {
+        const inputEvent = event as InputEvent;
+        const cursorInstances = store.getCursorInstances();
+        cursorInstances.forEach(cursor => cursor.onInput(inputEvent));
+    }
+}
diff --git a/client/src/lib/fluidService.ts b/client/src/lib/fluidService.ts
index 8968eb4..3aadec5 100644
--- a/client/src/lib/fluidService.ts
+++ b/client/src/lib/fluidService.ts
@@ -611,7 +611,8 @@ export async function createFluidClient(containerId?: string): Promise<FluidClie
 
             // åˆæœŸãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æœ€åˆã®ãƒšãƒ¼ã‚¸ã‚’ä½œæˆ
             const project = appData.root as Project;
-            project.addPage("ã¯ã˜ã‚ã¦ã®ãƒšãƒ¼ã‚¸", userId);
+            const root = project.addPage("ã¯ã˜ã‚ã¦ã®ãƒšãƒ¼ã‚¸", userId);
+            root.items.addNode("");
 
             // å¿…è¦ãªå…¨ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã¦FluidClientã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
             const fluidClientParams = {
diff --git a/client/src/routes/+page.svelte b/client/src/routes/+page.svelte
index ebd1499..d2dc0de 100644
--- a/client/src/routes/+page.svelte
+++ b/client/src/routes/+page.svelte
@@ -15,8 +15,7 @@ import { getDebugConfig } from "../lib/env";
 import { getLogger } from "../lib/logger";
 import { fluidStore } from "../stores/fluidStore.svelte";
 
-import GlobalTextArea from "../components/GlobalTextArea.svelte";
-import OutlinerTree from "../components/OutlinerTree.svelte";
+import OutlinerBase from "../components/OutlinerBase.svelte";
 import {
     createFluidClient,
     loadContainer,
@@ -191,17 +190,16 @@ function toggleDebugPanel() {
                     <div class="sidebar">
                         <PageList
                             currentUser={fluidStore.currentUser?.id || "anonymous"}
-                            project={store.project}
-                            rootItems={store.pages?.current}
+                            project={store.project!}
+                            rootItems={store.pages!.current}
                         />
                     </div>
 
                     <!-- ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆå³ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ï¼‰ -->
                     <div class="main-content">
                         {#if store.currentPage}
-                            <!-- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’ä¸€åº¦ã ã‘ãƒã‚¦ãƒ³ãƒˆ -->
-                            <GlobalTextArea />
-                            <OutlinerTree pageItem={store.currentPage} isReadOnly={false} />
+                            <!-- OutlinerBase ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼ã‚’è¡¨ç¤º -->
+                            <OutlinerBase pageItem={store.currentPage!} isReadOnly={false} />
                         {:else}
                             <div class="empty-state">
                                 <p>ãƒšãƒ¼ã‚¸ã‚’é¸æŠã™ã‚‹ã‹ã€æ–°ã—ã„ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
diff --git a/client/src/stores/.EditorOverlayStore.svelte.ts.swp b/client/src/stores/.EditorOverlayStore.svelte.ts.swp
deleted file mode 100644
index 66e6d15..0000000
Binary files a/client/src/stores/.EditorOverlayStore.svelte.ts.swp and /dev/null differ
diff --git a/client/src/stores/EditorOverlayStore.svelte.ts b/client/src/stores/EditorOverlayStore.svelte.ts
index a487b13..6a541ef 100644
--- a/client/src/stores/EditorOverlayStore.svelte.ts
+++ b/client/src/stores/EditorOverlayStore.svelte.ts
@@ -1,3 +1,5 @@
+import { Cursor } from "../lib/Cursor"; // Cursor ã‚¯ãƒ©ã‚¹ã‚’ import
+
 // Exported types
 export interface CursorPosition {
     // å„ã‚«ãƒ¼ã‚½ãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹ID
@@ -35,13 +37,27 @@ export interface SelectionRange {
 
 export class EditorOverlayStore {
     cursors = $state<Record<string, CursorPosition>>({});
+    // Cursor ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¿æŒã™ã‚‹ Map
+    private cursorInstances = new Map<string, Cursor>();
     selections = $state<Record<string, SelectionRange>>({});
     activeItemId = $state<string | null>(null);
     cursorVisible = $state<boolean>(true);
     animationPaused = $state<boolean>(false);
+    // GlobalTextArea ã® textarea è¦ç´ ã‚’ä¿æŒ
+    textareaRef = $state<HTMLTextAreaElement | null>(null);
 
     private timerId!: ReturnType<typeof setTimeout>;
 
+    // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢å‚ç…§ã‚’è¨­å®š
+    setTextareaRef(el: HTMLTextAreaElement | null) {
+        this.textareaRef = el;
+    }
+
+    // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢å‚ç…§ã‚’å–å¾—
+    getTextareaRef(): HTMLTextAreaElement | null {
+        return this.textareaRef;
+    }
+
     private genUUID(): string {
         if (typeof crypto !== "undefined" && typeof crypto.randomUUID === "function") {
             return crypto.randomUUID();
@@ -57,17 +73,36 @@ export class EditorOverlayStore {
     }
 
     updateCursor(cursor: CursorPosition) {
+        // Map ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨åŒæœŸ
+        const inst = this.cursorInstances.get(cursor.cursorId);
+        if (inst) {
+            inst.itemId = cursor.itemId;
+            inst.offset = cursor.offset;
+            inst.isActive = cursor.isActive;
+            if (cursor.userId) inst.userId = cursor.userId;
+        }
         this.cursors = { ...this.cursors, [cursor.cursorId]: cursor };
     }
 
     addCursor(omitProps: Omit<CursorPosition, "cursorId">) {
         const newId = this.genUUID();
+        // Cursor ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦ä¿æŒ
+        const cursorInst = new Cursor(newId, {
+            itemId: omitProps.itemId,
+            offset: omitProps.offset,
+            isActive: omitProps.isActive,
+            userId: omitProps.userId ?? "local",
+        });
+        this.cursorInstances.set(newId, cursorInst);
         const newCursor: CursorPosition = { cursorId: newId, ...omitProps };
         this.updateCursor(newCursor);
         return newId;
     }
 
     removeCursor(cursorId: string) {
+        // Map ã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‰Šé™¤
+        this.cursorInstances.delete(cursorId);
+        // Reactive state ã‹ã‚‰ã‚‚å‰Šé™¤
         const newCursors = { ...this.cursors };
         delete newCursors[cursorId];
         this.cursors = newCursors;
@@ -139,18 +174,40 @@ export class EditorOverlayStore {
 
     setCursor(cursorProps: Omit<CursorPosition, "cursorId">) {
         const id = this.genUUID();
+        // Cursor ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦ä¿æŒ
+        const cursorInst = new Cursor(id, {
+            itemId: cursorProps.itemId,
+            offset: cursorProps.offset,
+            isActive: cursorProps.isActive,
+            userId: cursorProps.userId ?? "local",
+        });
+        this.cursorInstances.set(id, cursorInst);
         const newCursor: CursorPosition = { cursorId: id, ...cursorProps };
         this.cursors = { ...this.cursors, [id]: newCursor };
         return id;
     }
 
     clearCursorForItem(itemId: string) {
+        // Map ã‹ã‚‰ä¸€è‡´ã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‰Šé™¤
+        for (const [cursorId, inst] of this.cursorInstances.entries()) {
+            if (inst.itemId === itemId) {
+                this.cursorInstances.delete(cursorId);
+            }
+        }
+        // Reactive state ã‚‚æ›´æ–°
         Object.entries(this.cursors).forEach(([cursorId, cursor]: [string, CursorPosition]) => {
             if (cursor.itemId === itemId) {
-                this.removeCursor(cursorId);
+                const newCursors = { ...this.cursors };
+                delete newCursors[cursorId];
+                this.cursors = newCursors;
             }
         });
     }
+
+    // ç™»éŒ²ã•ã‚ŒãŸ Cursor ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹
+    getCursorInstances(): import("../lib/Cursor").Cursor[] {
+        return Array.from(this.cursorInstances.values());
+    }
 }
 
 export const editorOverlayStore = new EditorOverlayStore();
diff --git a/docs/client-features.yaml b/docs/client-features.yaml
index e4524ca..dc87e03 100644
--- a/docs/client-features.yaml
+++ b/docs/client-features.yaml
@@ -10,3 +10,25 @@
     - 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãƒªã‚»ãƒƒãƒˆãƒªãƒ³ã‚¯ãŒé€ä¿¡ã•ã‚Œã‚‹'
     - 'ãƒªãƒ³ã‚¯ã¯ 30 åˆ†ã§å¤±åŠ¹ã™ã‚‹'
     - 'æ­£ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€ã‚‹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†è¨­å®šã§ãã‚‹'
+- id: CLM-0001
+  title: 'ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹'
+  shortcut: 'ã‚¯ãƒªãƒƒã‚¯'
+  description: 'ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚'
+  category: cursor-movement
+  status: implemented
+  tests:
+    - client/e2e/core/CLM-0001.spec.ts
+  acceptance:
+    - 'ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹'
+    - 'ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§æ–‡å­—å…¥åŠ›ãŒå¯èƒ½ã«ãªã‚‹'
+    - 'ã‚«ãƒ¼ã‚½ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹'
+    - 'ã‚«ãƒ¼ã‚½ãƒ«ãŒã‚¯ãƒªãƒƒã‚¯ä½ç½®ã«è¡¨ç¤ºã•ã‚Œã‚‹'
+    - 'ã‚«ãƒ¼ã‚½ãƒ«ãŒç‚¹æ»…ã™ã‚‹'
+- id: CLM-0002
+  title: 'å·¦ã¸ç§»å‹•'
+  shortcut: 'â†'
+  description: 'ã‚«ãƒ¼ã‚½ãƒ«ã‚’1æ–‡å­—å·¦ã«ç§»å‹•ã—ã¾ã™ã€‚'
+  category: cursor-movement
+  status: implemented
+  tests:
+    - client/e2e/core/CLM-0002.spec.ts
diff --git a/docs/feature-map.md b/docs/feature-map.md
index fe34a42..89ded36 100644
--- a/docs/feature-map.md
+++ b/docs/feature-map.md
@@ -1,4 +1,6 @@
 # Feature â†” Test Matrix
 | Feature | Title | Test files | Status |
 |---------|-------|------------|--------|
+| CLM-0001 | ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹ | â€” | implemented |
+| CLM-0002 | å·¦ã¸ç§»å‹• | â€” | implemented |
 | FTR-0012 | User can reset forgotten password | â€” | implemented |
diff --git a/docs/feature.chat.txt b/docs/feature.chat.txt
index 88969e0..962a558 100644
--- a/docs/feature.chat.txt
+++ b/docs/feature.chat.txt
@@ -1,6 +1,26 @@
 ### ğŸ“‘ Context
-`docs/features.yaml` ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ **æœªãƒ†ã‚¹ãƒˆã®æ©Ÿèƒ½** ã«å¯¾ã—ã¦
-Vitest ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
+`/workspace/docs/client-features.yaml` ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ status: implementedã§ã‚ã‚Šã€ãƒ†ã‚¹ãƒˆãŒç©ºã®æ©Ÿèƒ½ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’ä½œæˆãƒ»è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
+
+### ğŸ›  Requirements
+1. ãƒ†ã‚¹ãƒˆå†…å®¹ã«å¿œã˜ã¦ã€unit/e2e testã‚’ä½¿ã„åˆ†ã‘ã¦æ›¸ã„ã¦ä¸‹ã•ã„ã€‚ã€‚
+  unit testã¯ vitestã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
+  e2e testã¯ playwright ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
+  ä¸€ã¤ã®æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã¯ä¸€ã¤ã«ã—ã¦ä¸‹ã•ã„ã€‚
+  UIã®ãƒ†ã‚¹ãƒˆã¯ e2eã§å®Ÿæ–½ã—ã¦ä¸‹ã•ã„ã€‚
+
+2. unit testã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ã„ã¦ä¸‹ã•ã„ã€‚
+  unit testã®æ‹¡å¼µå­ã¯ .spec.ts
+  e2e testã¯ `/workspace/client/e2e/core/<FeatureID>.spec.ts` ã«ç½®ã„ã¦ä¸‹ã•ã„ã€‚
+    ä¾‹: `/workspace/client/e2e/core/FTR-0012.spec.ts`
+3. å„ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å†’é ­ã«æ¬¡ã®ä¾‹ã«æ²¿ã£ãŸãƒ¡ã‚¿ã‚’å…¥ã‚Œã¦ä¸‹ã•ã„ã€‚
+   /** @feature FTR-0012
+    *  Title   : User can reset forgotten password
+    *  Source  : docs/client-features.yaml
+    */
+4. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå¾Œã€client-features.yamlã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ãŸæ©Ÿèƒ½ testsæ¬„ã¸ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
+
+ä»–ã€å¿…è¦ãªæ‰‹é †ã‚„æƒ…å ±ãŒã‚ã‚Œã°ã”ææ¡ˆãã ã•ã„ã€‚æŒ‡ç¤ºã®ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆä¸­ã§ã™ã€‚
+
 
 ### âœ… Scope
 - **å¯¾è±¡ Feature IDs**
@@ -8,16 +28,6 @@ Vitest ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
   - FTR-0015 â€“ Two-factor authentication  
     ï¼ˆã„ãšã‚Œã‚‚ `status: implemented` ã‹ã¤ `tests: []`ï¼‰
 
-### ğŸ›  Requirements
-1. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ `tests/feature/<FeatureID>.spec.ts` ã«ç½®ã  
-   ä¾‹: `tests/feature/FTR-0012.spec.ts`
-2. å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å†’é ­ã«æ¬¡ã®ãƒ¡ã‚¿ã‚’å…¥ã‚Œã‚‹  
-   ```ts
-   /** @feature FTR-0012
-    *  Title   : User can reset forgotten password
-    *  Source  : docs/features.yaml
-    */
-
 
 
 
@@ -25,18 +35,12 @@ Vitest ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
 
 ## Task
 Convert the following plain-text table into new **cursor-movement** feature entries
-in `client-features.yaml`, **without touching any other sections**.
+in `/workspace/docs/client-features.yaml`, **without touching any other sections**.
 
 ## Source table
-```text
 åŸºæœ¬ã®ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
 æ“ä½œå | ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ | æ“ä½œå†…å®¹ (ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•)
 å·¦ã¸ç§»å‹• | â† | ã‚«ãƒ¼ã‚½ãƒ«ã‚’1æ–‡å­—å·¦ã«ç§»å‹•ã—ã¾ã™ã€‚
-å³ã¸ç§»å‹• | â†’ | ã‚«ãƒ¼ã‚½ãƒ«ã‚’1æ–‡å­—å³ã«ç§»å‹•ã—ã¾ã™ã€‚
-ä¸Šã¸ç§»å‹• | â†‘ | ã‚«ãƒ¼ã‚½ãƒ«ã‚’1è¡Œä¸Šã«ç§»å‹•ã—ã¾ã™ã€‚
-ä¸‹ã¸ç§»å‹• | â†“ | ã‚«ãƒ¼ã‚½ãƒ«ã‚’1è¡Œä¸‹ã«ç§»å‹•ã—ã¾ã™ã€‚
-è¡Œé ­ã«ç§»å‹• | Home | ç¾åœ¨ã®è¡Œã®å…ˆé ­ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•ã—ã¾ã™ã€‚
-è¡Œæœ«ã«ç§»å‹• | End  | ç¾åœ¨ã®è¡Œã®æœ«å°¾ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•ã—ã¾ã™ã€‚
 
 YAML format
 
@@ -53,5 +57,35 @@ Each entry should follow this schema exactly (keys in this order):
 Use the next available ID after the current highest CLM-####.
 Append new items under the cursor-movement section; create the section if absent.
 Keep existing YAML indentation (2 spaces).
-Return a unified diff (```diff) so we can apply it with git apply.
+Add the following cursor-movement entries to client-features.yaml
+
+
+
+
+
+
+
+### ğŸ“‘ Context
+`/workspace/docs/client-features.yaml` ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ status: implementedã§ã‚ã‚Šã€ãƒ†ã‚¹ãƒˆãŒç©ºã®æ©Ÿèƒ½ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’ä½œæˆãƒ»è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
+
+### ğŸ›  Requirements
+1. ãƒ†ã‚¹ãƒˆå†…å®¹ã«å¿œã˜ã¦ã€unit/component/e2e testã‚’ä½¿ã„åˆ†ã‘ã¦æ›¸ã„ã¦ä¸‹ã•ã„ã€‚ã€‚
+  unit testã¯ vitestã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
+  component testã¯ playwright ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚https://playwright.dev/docs/test-components
+  e2e testã¯ playwright ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
+  ä¸€ã¤ã®æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã¯ä¸€ã¤ã«ã—ã¦ä¸‹ã•ã„ã€‚
+  UIã®ãƒ†ã‚¹ãƒˆã¯componentåˆã¯e2eã§å®Ÿæ–½ã—ã¦ä¸‹ã•ã„ã€‚
+
+2. unit/component testã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ã„ã¦ä¸‹ã•ã„ã€‚
+  unit testã®æ‹¡å¼µå­ã¯ .spec.ts
+  component testã®æ‹¡å¼µå­ã¯ .test.ts
+  e2e testã¯ `/workspace/client/e2e/core/<FeatureID>.spec.ts` ã«ç½®ã„ã¦ä¸‹ã•ã„ã€‚
+    ä¾‹: `/workspace/client/e2e/core/FTR-0012.spec.ts`
+3. å„ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å†’é ­ã«æ¬¡ã®ä¾‹ã«æ²¿ã£ãŸãƒ¡ã‚¿ã‚’å…¥ã‚Œã¦ä¸‹ã•ã„ã€‚
+   /** @feature FTR-0012
+    *  Title   : User can reset forgotten password
+    *  Source  : docs/client-features.yaml
+    */
+4. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå¾Œã€client-features.yamlã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ãŸæ©Ÿèƒ½ testsæ¬„ã¸ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
 
+ä»–ã€å¿…è¦ãªæ‰‹é †ã‚„æƒ…å ±ãŒã‚ã‚Œã°ã”ææ¡ˆãã ã•ã„ã€‚
node âœ /workspace (main) $
````

---

```bash
git commit -m "Refactor cursor handling and global textarea integration" -m "Introduce Cursor and KeyEventHandler for multi-cursor support, update EditorOverlayStore to manage cursor instances and textarea reference, replace hidden textareas with shared GlobalTextArea in OutlinerItem, add OutlinerBase component and simplify +page.svelte, initialize root node in fluidService, and update docs with CLM-0001 and CLM-0002 features."
```

---

---
