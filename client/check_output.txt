
> outliner@0.0.1 check /app/client
> svelte-kit sync && svelte-check --tsconfig ./tsconfig.json

Loading svelte-check in workspace: /app/client
Getting Svelte diagnostics...

/app/client/src/components/AliasPicker.svelte:27:12
Error: No overload matches this call.
  Overload 1 of 2, '(type: keyof WindowEventMap, listener: (this: Window, ev: Event | PromiseRejectionEvent | BeforeUnloadEvent | InputEvent | ... 28 more ... | StorageEvent) => any, options?: boolean | ... 1 more ... | undefined): void', gave the following error.
    Argument of type '"aliaspicker-visibility"' is not assignable to parameter of type 'keyof WindowEventMap'.
  Overload 2 of 2, '(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions | undefined): void', gave the following error.
    Argument of type '(e: AliasPickerVisibilityEvent) => void' is not assignable to parameter of type 'EventListenerOrEventListenerObject'.
      Type '(e: AliasPickerVisibilityEvent) => void' is not assignable to type 'EventListener'.
        Types of parameters 'e' and 'evt' are incompatible.
          Type 'Event' has no properties in common with type 'AliasPickerVisibilityEvent'. (ts)
    const onVis = (e: AliasPickerVisibilityEvent) => { try { visible = !!(e?.detail?.visible); } catch {} };
    window.addEventListener("aliaspicker-visibility", onVis);
    return () => window.removeEventListener("aliaspicker-visibility", onVis);

/app/client/src/components/AliasPicker.svelte:28:25
Error: No overload matches this call.
  Overload 1 of 2, '(type: keyof WindowEventMap, listener: (this: Window, ev: Event | PromiseRejectionEvent | BeforeUnloadEvent | InputEvent | ... 28 more ... | StorageEvent) => any, options?: boolean | ... 1 more ... | undefined): void', gave the following error.
    Argument of type '"aliaspicker-visibility"' is not assignable to parameter of type 'keyof WindowEventMap'.
  Overload 2 of 2, '(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | EventListenerOptions | undefined): void', gave the following error.
    Argument of type '(e: AliasPickerVisibilityEvent) => void' is not assignable to parameter of type 'EventListenerOrEventListenerObject'.
      Type '(e: AliasPickerVisibilityEvent) => void' is not assignable to type 'EventListener'.
        Types of parameters 'e' and 'evt' are incompatible.
          Type 'Event' has no properties in common with type 'AliasPickerVisibilityEvent'. (ts)
    window.addEventListener("aliaspicker-visibility", onVis);
    return () => window.removeEventListener("aliaspicker-visibility", onVis);
});

/app/client/src/components/AuthComponent.svelte:84:18
Error: No overload matches this call.
  Overload 1 of 2, '(type: keyof DocumentEventMap, listener: (this: Document, ev: Event | InputEvent | UIEvent | KeyboardEvent | CompositionEvent | ... 14 more ... | WheelEvent) => any, options?: boolean | ... 1 more ... | undefined): void', gave the following error.
    Argument of type '"auth-success"' is not assignable to parameter of type 'keyof DocumentEventMap'.
  Overload 2 of 2, '(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions | undefined): void', gave the following error.
    Argument of type '(event: AuthSuccessEvent) => void' is not assignable to parameter of type 'EventListenerOrEventListenerObject'.
      Type '(event: AuthSuccessEvent) => void' is not assignable to type 'EventListener'.
        Types of parameters 'event' and 'evt' are incompatible.
          Type 'Event' has no properties in common with type 'AuthSuccessEvent'. (ts)
    if (typeof document !== "undefined") {
        document.addEventListener("auth-success", (event: AuthSuccessEvent) => {
            if (event.detail && event.detail.user) {

/app/client/src/lib/yjs/tokenRefresh.ts:46:41
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration & { websocketProvider?: { status?: string | undefined; } | undefined; }'.
            // HocuspocusProvider re-uses the initial URL string, so if we don't update it, it sends the old/expired token.
            if (provider.configuration?.url && typeof provider.configuration.url === "string") {
                const urlObj = new URL(provider.configuration.url);

/app/client/src/lib/yjs/tokenRefresh.ts:46:78
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration & { websocketProvider?: { status?: string | undefined; } | undefined; }'.
            // HocuspocusProvider re-uses the initial URL string, so if we don't update it, it sends the old/expired token.
            if (provider.configuration?.url && typeof provider.configuration.url === "string") {
                const urlObj = new URL(provider.configuration.url);

/app/client/src/lib/yjs/tokenRefresh.ts:47:63
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration & { websocketProvider?: { status?: string | undefined; } | undefined; }'.
            if (provider.configuration?.url && typeof provider.configuration.url === "string") {
                const urlObj = new URL(provider.configuration.url);
                urlObj.searchParams.set("token", t);

/app/client/src/lib/yjs/tokenRefresh.ts:49:40
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration & { websocketProvider?: { status?: string | undefined; } | undefined; }'.
                urlObj.searchParams.set("token", t);
                provider.configuration.url = urlObj.toString();
                if ((provider as TokenRefreshableProvider).url) {

/app/client/src/lib/yjs/tokenRefresh.ts:51:89
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration & { websocketProvider?: { status?: string | undefined; } | undefined; }'.
                if ((provider as TokenRefreshableProvider).url) {
                    (provider as TokenRefreshableProvider).url = provider.configuration.url;
                }

/app/client/src/lib/yjs/connection.ts:685:53
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
            const t = await getFreshIdToken();
            if (provider && provider.configuration?.url && typeof provider.configuration.url === "string" && t) {
                const urlObj = new URL(provider.configuration.url);

/app/client/src/lib/yjs/connection.ts:685:90
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
            const t = await getFreshIdToken();
            if (provider && provider.configuration?.url && typeof provider.configuration.url === "string" && t) {
                const urlObj = new URL(provider.configuration.url);

/app/client/src/lib/yjs/connection.ts:686:63
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
            if (provider && provider.configuration?.url && typeof provider.configuration.url === "string" && t) {
                const urlObj = new URL(provider.configuration.url);
                urlObj.searchParams.set("token", t);

/app/client/src/lib/yjs/connection.ts:688:40
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
                urlObj.searchParams.set("token", t);
                provider.configuration.url = urlObj.toString();
                // Also update the provider.url property if it exists

/app/client/src/lib/yjs/connection.ts:691:89
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
                if ((provider as TokenRefreshableProvider).url) {
                    (provider as TokenRefreshableProvider).url = provider.configuration.url;
                }

/app/client/src/lib/yjs/connection.ts:755:53
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
            const t = await getFreshIdToken();
            if (provider && provider.configuration?.url && typeof provider.configuration.url === "string" && t) {
                const urlObj = new URL(provider.configuration.url);

/app/client/src/lib/yjs/connection.ts:755:90
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
            const t = await getFreshIdToken();
            if (provider && provider.configuration?.url && typeof provider.configuration.url === "string" && t) {
                const urlObj = new URL(provider.configuration.url);

/app/client/src/lib/yjs/connection.ts:756:63
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
            if (provider && provider.configuration?.url && typeof provider.configuration.url === "string" && t) {
                const urlObj = new URL(provider.configuration.url);
                urlObj.searchParams.set("token", t);

/app/client/src/lib/yjs/connection.ts:758:40
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
                urlObj.searchParams.set("token", t);
                provider.configuration.url = urlObj.toString();
                if ((provider as TokenRefreshableProvider).url) {

/app/client/src/lib/yjs/connection.ts:760:89
Error: Property 'url' does not exist on type 'CompleteHocuspocusProviderConfiguration'.
                if ((provider as TokenRefreshableProvider).url) {
                    (provider as TokenRefreshableProvider).url = provider.configuration.url;
                }

/app/client/src/components/ProjectSelector.svelte:34:55
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "ProjectSelector - projects len", msg?: undefined): void', gave the following error.
    Argument of type '{ len: number; ucv: number; }' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "ProjectSelector - projects len", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type '{ len: number; ucv: number; }' is not assignable to parameter of type 'undefined'. (ts)
    $effect(() => {
        logger.info("ProjectSelector - projects len", {
            len: projects.length,
            ucv: firestoreStore.ucVersion,
        });
    });

/app/client/src/components/ProjectSelector.svelte:126:67
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "ProjectSelector cleanup failed", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "ProjectSelector cleanup failed", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
                } catch (err) {
                    logger.warn("ProjectSelector cleanup failed", err);
                }

/app/client/src/components/ProjectSelector.svelte:146:56
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "ProjectSelector - Current user:", msg?: undefined): void', gave the following error.
    Argument of type 'IUser | null' is not assignable to parameter of type 'undefined'.
      Type 'null' is not assignable to type 'undefined'.
  Overload 2 of 3, '(obj: "ProjectSelector - Current user:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'IUser | null' is not assignable to parameter of type 'undefined'.
      Type 'null' is not assignable to type 'undefined'. (ts)

        logger.info("ProjectSelector - Current user:", currentUser);
        logger.info("ProjectSelector - Auth user:", authUser);

/app/client/src/components/ProjectSelector.svelte:147:53
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "ProjectSelector - Auth user:", msg?: undefined): void', gave the following error.
    Argument of type 'User | null' is not assignable to parameter of type 'undefined'.
      Type 'null' is not assignable to type 'undefined'.
  Overload 2 of 3, '(obj: "ProjectSelector - Auth user:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'User | null' is not assignable to parameter of type 'undefined'.
      Type 'null' is not assignable to type 'undefined'. (ts)
        logger.info("ProjectSelector - Current user:", currentUser);
        logger.info("ProjectSelector - Auth user:", authUser);

/app/client/src/components/ProjectSelector.svelte:215:51
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Project reload error:", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Project reload error:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
        } catch (err) {
            logger.error("Project reload error:", err);
            error =

/app/client/src/components/ProjectSelector.svelte:274:22
Error: Expected 2 arguments, but got 1. (ts)

            <a href={resolve("/projects/new")} class="new-project-link">
                Create New

/app/client/src/components/AuthenticatedHome.svelte:21:55
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Failed to switch project:", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Failed to switch project:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
        } catch (error) {
            logger.error("Failed to switch project:", error);
        }

/app/client/src/components/BacklinkPanel.svelte:43:51
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Failed to load backlinks:", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Failed to load backlinks:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    catch (err) {
        logger.error("Failed to load backlinks:", err);
        error = "Failed to load backlinks";

/app/client/src/components/BacklinkPanel.svelte:65:20
Error: Expected 2 arguments, but got 1. (ts)
        // Use current project if not specified
        await goto(resolve(`/${pageName}`));
    }

/app/client/src/components/BacklinkPanel.svelte:68:20
Error: Expected 2 arguments, but got 1. (ts)
    else {
        await goto(resolve(`/${projectName}/${pageName}`));
    }

/app/client/src/components/ChartPanel.svelte:27:9
Error: Argument of type '() => Promise<(() => void) | undefined>' is not assignable to parameter of type '() => (() => any) | Promise<undefined> | undefined'.
  Type 'Promise<(() => void) | undefined>' is not assignable to type '(() => any) | Promise<undefined> | undefined'.
    Type 'Promise<(() => void) | undefined>' is not assignable to type 'Promise<undefined>'.
      Type '(() => void) | undefined' is not assignable to type 'undefined'.
        Type '() => void' is not assignable to type 'undefined'. (ts)

onMount(async () => {
    try {

/app/client/src/components/ChartQueryEditor.svelte:11:18
Warn: This reference only captures the initial value of `item`. Did you mean to reference it inside a derived instead?
https://svelte.dev/e/state_referenced_locally (svelte)
let { item }: Props = $props();
let sql = $state(item.chartQuery || "SELECT 1 AS value");
let isInitialized = $state(false);

/app/client/src/components/CommentThread.svelte:36:64
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
let props: Props = $props();
let comments = $derived.by(() => props.comments ?? props.item?.comments);
let onCountChanged = $derived.by(() => props.onCountChanged);

/app/client/src/components/CommentThread.svelte:70:13
Error: Type 'YArray<YMap<CommentValueType>> | undefined' is not assignable to type 'YArray<YMap<unknown>> | undefined'.
  Type 'YArray<YMap<CommentValueType>>' is not assignable to type 'YArray<YMap<unknown>>'.
    Types of property 'insert' are incompatible.
      Type '(index: number, content: YMap<CommentValueType>[]) => void' is not assignable to type '(index: number, content: YMap<unknown>[]) => void'.
        Types of parameters 'content' and 'content' are incompatible.
          Type 'YMap<unknown>[]' is not assignable to type 'YMap<CommentValueType>[]'.
            Type 'YMap<unknown>' is not assignable to type 'YMap<CommentValueType>'.
              The types returned by 'values().next(...)' are incompatible between these types.
                Type 'IteratorResult<unknown, any>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                  Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                    Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorYieldResult<CommentValueType>'.
                      Type 'unknown' is not assignable to type 'CommentValueType'. (ts)
        // 1) Get internal yArray if Comments wrapper exists (private but accessible in JS)
        let yarr: Y.Array<Y.Map<unknown>> | undefined = (comments as Comments | undefined)?.yArray;
        // 2) If not, ensure "comments" via item Y.Map

/app/client/src/components/CommentThread.svelte:70:93
Error: Property 'yArray' is private and only accessible within class 'Comments'. (ts)
        // 1) Get internal yArray if Comments wrapper exists (private but accessible in JS)
        let yarr: Y.Array<Y.Map<unknown>> | undefined = (comments as Comments | undefined)?.yArray;
        // 2) If not, ensure "comments" via item Y.Map

/app/client/src/components/CommentThread.svelte:110:62
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Error in observe handler", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Error in observe handler", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
                } catch (e) {
                    logger.error("Error in observe handler", e);
                }

/app/client/src/components/CommentThread.svelte:140:55
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] mount props", msg?: undefined): void', gave the following error.
    Argument of type '{ hasComments: boolean; hasDoc: boolean; }' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] mount props", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type '{ hasComments: boolean; hasDoc: boolean; }' is not assignable to parameter of type 'undefined'. (ts)

    try { logger.debug('[CommentThread] mount props', { hasComments: !!props?.comments, hasDoc: !!props?.doc }); } catch {}

/app/client/src/components/CommentThread.svelte:221:75
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
    if (!text) return;
    let commentsObj: Comments | undefined = props.comments ?? props.item?.comments;
    if (!commentsObj && props.item) {

/app/client/src/components/CommentThread.svelte:235:44
Error: Argument of type 'YArray<YMap<unknown>>' is not assignable to parameter of type 'YArray<YMap<CommentValueType>>'.
  Types of property 'insert' are incompatible.
    Type '(index: number, content: YMap<unknown>[]) => void' is not assignable to type '(index: number, content: YMap<CommentValueType>[]) => void'.
      Types of parameters 'content' and 'content' are incompatible.
        Type 'YMap<CommentValueType>[]' is not assignable to type 'YMap<unknown>[]'.
          Type 'YMap<CommentValueType>' is not assignable to type 'YMap<unknown>'.
            Types of property '_eH' are incompatible.
              Type 'EventHandler<YMapEvent<CommentValueType>, Transaction>' is not assignable to type 'EventHandler<YMapEvent<unknown>, Transaction>'.
                Type 'YMapEvent<unknown>' is not assignable to type 'YMapEvent<CommentValueType>'.
                  The types returned by 'target.values().next(...)' are incompatible between these types.
                    Type 'IteratorResult<unknown, any>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                      Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                        Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorYieldResult<CommentValueType>'.
                          Type 'unknown' is not assignable to type 'CommentValueType'. (ts)
                }
                commentsObj = new Comments(arr);
                logger.debug('[CommentThread] initialized comments via tree/key fallback');

/app/client/src/components/CommentThread.svelte:239:83
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] failed to ensure comments via fallback", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] failed to ensure comments via fallback", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
        } catch (e) {
            logger.warn('[CommentThread] failed to ensure comments via fallback', e);
        }

/app/client/src/components/CommentThread.svelte:244:59
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] add comment, newText=", msg?: undefined): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] add comment, newText=", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)

    logger.debug('[CommentThread] add comment, newText=', newText);
    logger.debug('[CommentThread] comments object:', commentsObj, 'props.item?', !!props.item, 'item?.comments?', !!props.item?.comments);

/app/client/src/components/CommentThread.svelte:245:54
Error: Argument of type 'Comments | undefined' is not assignable to parameter of type 'undefined'.
  Type 'Comments' is not assignable to type 'undefined'. (ts)
    logger.debug('[CommentThread] add comment, newText=', newText);
    logger.debug('[CommentThread] comments object:', commentsObj, 'props.item?', !!props.item, 'item?.comments?', !!props.item?.comments);

/app/client/src/components/CommentThread.svelte:245:129
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
    logger.debug('[CommentThread] add comment, newText=', newText);
    logger.debug('[CommentThread] comments object:', commentsObj, 'props.item?', !!props.item, 'item?.comments?', !!props.item?.comments);

/app/client/src/components/CommentThread.svelte:253:67
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] comment added to Yjs, id=", msg?: undefined): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] comment added to Yjs, id=", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
        id = res?.id || `local-${time}-${Math.random().toString(36).slice(2)}`;
        logger.debug('[CommentThread] comment added to Yjs, id=', id);
    } else {

/app/client/src/components/CommentThread.svelte:291:53
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
            try {
                if (props.item && typeof props.item.comments !== 'undefined') {
                    const itemComments = props.item.comments;

/app/client/src/components/CommentThread.svelte:292:53
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
                if (props.item && typeof props.item.comments !== 'undefined') {
                    const itemComments = props.item.comments;
                    if (typeof itemComments.length === 'number') {

/app/client/src/components/CommentThread.svelte:316:66
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] failed to sync after add", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] failed to sync after add", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (e) {
        logger.error('[CommentThread] failed to sync after add', e);
    }

/app/client/src/components/CommentThread.svelte:335:75
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
function remove(id: string) {
    let commentsObj: Comments | undefined = props.comments ?? props.item?.comments;
    if (!commentsObj && props.item) {

/app/client/src/components/CommentThread.svelte:345:44
Error: Argument of type 'YArray<YMap<unknown>>' is not assignable to parameter of type 'YArray<YMap<CommentValueType>>'.
  Types of property 'insert' are incompatible.
    Type '(index: number, content: YMap<unknown>[]) => void' is not assignable to type '(index: number, content: YMap<CommentValueType>[]) => void'.
      Types of parameters 'content' and 'content' are incompatible.
        Type 'YMap<CommentValueType>[]' is not assignable to type 'YMap<unknown>[]'.
          Type 'YMap<CommentValueType>' is not assignable to type 'YMap<unknown>'.
            Types of property '_eH' are incompatible.
              Type 'EventHandler<YMapEvent<CommentValueType>, Transaction>' is not assignable to type 'EventHandler<YMapEvent<unknown>, Transaction>'.
                Type 'YMapEvent<unknown>' is not assignable to type 'YMapEvent<CommentValueType>'.
                  The types returned by 'target.values().next(...)' are incompatible between these types.
                    Type 'IteratorResult<unknown, any>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                      Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                        Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorYieldResult<CommentValueType>'.
                          Type 'unknown' is not assignable to type 'CommentValueType'. (ts)
                if (!arr) { arr = new Y.Array<Y.Map<unknown>>(); value.set("comments", arr); }
                commentsObj = new Comments(arr);
                logger.debug('[CommentThread] ensured comments for remove via tree/key');

/app/client/src/components/CommentThread.svelte:349:81
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] failed to ensure comments for remove", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] failed to ensure comments for remove", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
        } catch (e) {
            logger.warn('[CommentThread] failed to ensure comments for remove', e);
        }

/app/client/src/components/CommentThread.svelte:352:111
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] deleteComment error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] deleteComment error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    }
    try { commentsObj?.deleteComment?.(id); } catch (e) { logger.error('[CommentThread] deleteComment error', e); }
    try { /* Yjs  derived updates; no direct assignment to commentsList */ } catch (e) { logger.error('[CommentThread] toPlain after delete error', e); }

/app/client/src/components/CommentThread.svelte:353:151
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] toPlain after delete error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] toPlain after delete error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    try { commentsObj?.deleteComment?.(id); } catch (e) { logger.error('[CommentThread] deleteComment error', e); }
    try { /* Yjs  derived updates; no direct assignment to commentsList */ } catch (e) { logger.error('[CommentThread] toPlain after delete error', e); }
    localComments = localComments.filter(c => c.id !== id);

/app/client/src/components/CommentThread.svelte:378:62
Error: Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
function saveEdit(id: string) {
    try { logger.debug('[CommentThread] saveEdit start id=', id, 'editText=', editText); } catch {}
    let commentsObj: Comments | undefined = props.comments ?? props.item?.comments;

/app/client/src/components/CommentThread.svelte:379:75
Error: Property 'comments' does not exist on type 'ItemLike'. (ts)
    try { logger.debug('[CommentThread] saveEdit start id=', id, 'editText=', editText); } catch {}
    let commentsObj: Comments | undefined = props.comments ?? props.item?.comments;
    if (!commentsObj && props.item) {

/app/client/src/components/CommentThread.svelte:389:44
Error: Argument of type 'YArray<YMap<unknown>>' is not assignable to parameter of type 'YArray<YMap<CommentValueType>>'.
  Types of property 'insert' are incompatible.
    Type '(index: number, content: YMap<unknown>[]) => void' is not assignable to type '(index: number, content: YMap<CommentValueType>[]) => void'.
      Types of parameters 'content' and 'content' are incompatible.
        Type 'YMap<CommentValueType>[]' is not assignable to type 'YMap<unknown>[]'.
          Type 'YMap<CommentValueType>' is not assignable to type 'YMap<unknown>'.
            Types of property '_eH' are incompatible.
              Type 'EventHandler<YMapEvent<CommentValueType>, Transaction>' is not assignable to type 'EventHandler<YMapEvent<unknown>, Transaction>'.
                Type 'YMapEvent<unknown>' is not assignable to type 'YMapEvent<CommentValueType>'.
                  The types returned by 'target.values().next(...)' are incompatible between these types.
                    Type 'IteratorResult<unknown, any>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                      Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorResult<CommentValueType, any>'.
                        Type 'IteratorYieldResult<unknown>' is not assignable to type 'IteratorYieldResult<CommentValueType>'.
                          Type 'unknown' is not assignable to type 'CommentValueType'. (ts)
                if (!arr) { arr = new Y.Array<Y.Map<unknown>>(); value.set("comments", arr); }
                commentsObj = new Comments(arr);
                logger.debug('[CommentThread] ensured comments for saveEdit via tree/key');

/app/client/src/components/CommentThread.svelte:393:83
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] failed to ensure comments for saveEdit", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] failed to ensure comments for saveEdit", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
        } catch (e) {
            logger.warn('[CommentThread] failed to ensure comments for saveEdit', e);
        }

/app/client/src/components/CommentThread.svelte:402:61
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] updateComment error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] updateComment error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (e) {
        logger.error('[CommentThread] updateComment error', e);
    }

/app/client/src/components/CommentThread.svelte:405:203
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] toPlain after update error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] toPlain after update error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)

    try { /* Yjs derived updates; no direct assignment to commentsList */ logger.debug('[CommentThread] updateComment applied'); } catch (e) { logger.error('[CommentThread] toPlain after update error', e); }

/app/client/src/components/CommentThread.svelte:413:76
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] renderCommentsState after update", msg?: undefined): void', gave the following error.
    Argument of type 'Comment[]' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] renderCommentsState after update", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'Comment[]' is not assignable to parameter of type 'undefined'. (ts)

    try { logger.debug('[CommentThread] renderCommentsState after update', renderCommentsState); } catch {}
    editingId = null;

/app/client/src/components/CommentThread.svelte:420:81
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] failed to dispatch comment-edited event", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] failed to dispatch comment-edited event", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (e) {
        logger.error('[CommentThread] failed to dispatch comment-edited event', e);
    }

/app/client/src/components/CommentThread.svelte:451:128
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[CommentThread] submit add error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[CommentThread] submit add error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    {/each}
    <form onsubmit={(e) => { e.preventDefault(); try { add(); } catch (err) { logger.error('[CommentThread] submit add error', err); } }} data-testid="comment-form">
        <input placeholder="Add comment" bind:value={newText} data-testid="new-comment-input" aria-label="New comment text" oninput={(e) => { try { e2eLog({ tag: 'input', value: (e.target as HTMLInputElement).value }); } catch {} }} />

/app/client/src/components/EditableQueryGrid.svelte:162:41
Warn: Avoid using autofocus
https://svelte.dev/e/a11y_autofocus (svelte)
                                        class="cell-input"
                                        autofocus
                                    />

/app/client/src/components/EditorOverlay.svelte:604:41
Error: 'boxSel.boxSelectionRanges' is possibly 'undefined'. (ts)
                        const lines: string[] = [];
                        for (const r of boxSel.boxSelectionRanges) {
                            const full = getTextByItemId(r.itemId);

/app/client/src/components/EditorOverlay.svelte:783:21
Error: 'boxSel.boxSelectionRanges' is possibly 'undefined'. (ts)
    const lines: string[] = [];
    for (const r of boxSel.boxSelectionRanges) {
      const full = getTextByItemId(r.itemId);

/app/client/src/components/EditorOverlay.svelte:796:47
Error: This condition will always return true since this function is always defined. Did you mean to call it instead? (ts)
      }
      if (typeof navigator !== 'undefined' && (navigator as typeof navigator & { clipboard?: { writeText?: (text: string) => Promise<void> } })?.clipboard?.writeText) {
        (navigator as typeof navigator & { clipboard?: { writeText?: (text: string) => Promise<void> } }).clipboard!.writeText(rectText).catch(() => {});

/app/client/src/components/EditorOverlay.svelte:952:45
Error: This condition will always return true since this function is always defined. Did you mean to call it instead? (ts)
    // Write to navigator.clipboard as well (for Playwright compatibility)
    if (typeof navigator !== 'undefined' && (navigator as typeof navigator & { clipboard?: { writeText?: (text: string) => Promise<void> } })?.clipboard?.writeText) {
      (navigator as typeof navigator & { clipboard?: { writeText?: (text: string) => Promise<void> } }).clipboard!.writeText(selectedText).catch(() => {});

/app/client/src/components/EditorOverlay.svelte:1069:45
Error: This condition will always return true since this function is always defined. Did you mean to call it instead? (ts)
    // Write to navigator.clipboard as well (for Playwright compatibility)
    if (typeof navigator !== 'undefined' && (navigator as typeof navigator & { clipboard?: { writeText?: (text: string) => Promise<void> } })?.clipboard?.writeText) {
      (navigator as typeof navigator & { clipboard?: { writeText?: (text: string) => Promise<void> } }).clipboard!.writeText(combinedText).catch(() => {});

/app/client/src/components/GraphView.svelte:68:27
Error: Property 'id' does not exist on type 'string | number | Date | GraphNodeItemOption | OptionDataValue[]'.
  Property 'id' does not exist on type 'string'. (ts)
        return data.filter((node): node is GraphNodeWithLayout =>
            Boolean(node?.id),
        );

/app/client/src/components/GraphView.svelte:115:37
Error: A type predicate's type must be assignable to its parameter's type.
  Type '{ id: string; x: number; y: number; fixed?: boolean | undefined; }' is not assignable to type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }'.
    Types of property 'fixed' are incompatible.
      Type 'boolean | undefined' is not assignable to type 'boolean'.
        Type 'undefined' is not assignable to type 'boolean'. (ts)
                .filter(
                    (node): node is GraphLayout["nodes"][number] =>
                        typeof node.x === "number" &&

/app/client/src/components/GraphView.svelte:125:25
Error: No overload matches this call.
  Overload 1 of 2, '(...items: ConcatArray<{ id: string; x: number; y: number; fixed?: boolean | undefined; }>[]): { id: string; x: number; y: number; fixed?: boolean | undefined; }[]', gave the following error.
    Argument of type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }[]' is not assignable to parameter of type 'ConcatArray<{ id: string; x: number; y: number; fixed?: boolean | undefined; }>'.
      The types returned by 'slice(...)' are incompatible between these types.
        Type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }[]' is not assignable to type '{ id: string; x: number; y: number; fixed?: boolean | undefined; }[]'.
          Type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }' is not assignable to type '{ id: string; x: number; y: number; fixed?: boolean | undefined; }'.
            Types of property 'x' are incompatible.
              Type 'number | undefined' is not assignable to type 'number'.
                Type 'undefined' is not assignable to type 'number'.
  Overload 2 of 2, '(...items: ({ id: string; x: number; y: number; fixed?: boolean | undefined; } | ConcatArray<{ id: string; x: number; y: number; fixed?: boolean | undefined; }>)[]): { id: string; x: number; y: number; fixed?: boolean | undefined; }[]', gave the following error.
    Argument of type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }[]' is not assignable to parameter of type '{ id: string; x: number; y: number; fixed?: boolean | undefined; } | ConcatArray<{ id: string; x: number; y: number; fixed?: boolean | undefined; }>'.
      Type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }[]' is not assignable to type 'ConcatArray<{ id: string; x: number; y: number; fixed?: boolean | undefined; }>'.
        The types returned by 'slice(...)' are incompatible between these types.
          Type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }[]' is not assignable to type '{ id: string; x: number; y: number; fixed?: boolean | undefined; }[]'.
            Type '{ id: string; x: number | undefined; y: number | undefined; fixed: boolean; }' is not assignable to type '{ id: string; x: number; y: number; fixed?: boolean | undefined; }'.
              Types of property 'x' are incompatible.
                Type 'number | undefined' is not assignable to type 'number'.
                  Type 'undefined' is not assignable to type 'number'. (ts)
                .filter((n) => !currentNodesMap.has(n.id))
                .concat(currentNodes);

/app/client/src/components/GraphView.svelte:229:26
Error: Expected 2 arguments, but got 1. (ts)
                if (projectName) {
                    goto(resolve(`/${projectName}/${pageName}`));
                } else {

/app/client/src/components/GraphView.svelte:231:26
Error: Expected 2 arguments, but got 1. (ts)
                } else {
                    goto(resolve(`/${pageName}`));
                }

/app/client/src/components/GraphView.svelte:284:25
Error: Cannot invoke an object which is possibly 'undefined'. (ts)
                    try {
                        ymap.unobserveDeep(handler);
                    } catch {}

/app/client/src/components/LandingContent.svelte:25:44
Warn: Using `on:click` to listen to the click event is deprecated. Use the event attribute `onclick` instead
https://svelte.dev/e/event_directive_deprecated (svelte)
    <section class="cta-section">
        <button class="cta-button primary" on:click={login}>
            Sign in with Google

/app/client/src/components/LandingContent.svelte:28:46
Warn: Using `on:click` to listen to the click event is deprecated. Use the event attribute `onclick` instead
https://svelte.dev/e/event_directive_deprecated (svelte)
        </button>
        <button class="cta-button secondary" on:click={login}>
            Get Started

/app/client/src/components/LinkPreview.svelte:95:57
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Failed to load preview content:", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Failed to load preview content:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (err) {
        logger.error("Failed to load preview content:", err);
        error = "Failed to load preview";

/app/client/src/components/LinkPreview.svelte:107:24
Error: 'store.pages.current' is possibly 'undefined'. (ts)
    // Search for page with matching name
    for (const page of store.pages.current) {
        if (page.text.toLowerCase() === name.toLowerCase()) {

/app/client/src/components/LinkPreview.svelte:163:125
Error: 'previewContent' is possibly 'null'. (ts)
                            <ul>
                                {#each Array.from({ length: Math.min(5, (previewContent.items as any).length) }, (_, i) => (previewContent.items as any)[i]) as item (item.id)}
                                    <li>{item.text}</li>

/app/client/src/components/OutlinerItemAlias.svelte:21:48
Warn: This reference only captures the initial value of `item`. Did you mean to reference it inside a derived instead?
https://svelte.dev/e/state_referenced_locally (svelte)
// Subscription to aliasTargetId via Yjs observe
let aliasTargetId = $state<string | undefined>(item.aliasTargetId);

/app/client/src/components/OutlinerItemAlias.svelte:34:98
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "OutlinerItemAlias: aliasTargetId updated via observe", msg?: undefined): void', gave the following error.
    Argument of type '{ itemId: string; newValue: any; }' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "OutlinerItemAlias: aliasTargetId updated via observe", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type '{ itemId: string; newValue: any; }' is not assignable to parameter of type 'undefined'. (ts)
                            aliasTargetId = newValue;
                            logger.debug("OutlinerItemAlias: aliasTargetId updated via observe", { itemId: modelId, newValue });
                        }

/app/client/src/components/OutlinerItemAlias.svelte:93:70
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "OutlinerItemAlias: alias target resolve error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "OutlinerItemAlias: alias target resolve error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (e) {
        logger.warn("OutlinerItemAlias: alias target resolve error", e);
    }

/app/client/src/components/OutlinerItemAlias.svelte:115:68
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "OutlinerItemAlias: alias path resolve error", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "OutlinerItemAlias: alias path resolve error", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (e) {
        logger.warn("OutlinerItemAlias: alias path resolve error", e);
    }

/app/client/src/components/OutlinerItemAttachments.svelte:28:87
Error: Argument of type 'number' is not assignable to parameter of type 'undefined'. (ts)
                attachmentsMirror = arr.map((u: any) => Array.isArray(u) ? u[0] : u);
                logger.debug('[OutlinerItemAttachments][Yjs] attachments observe ->', attachmentsMirror.length, 'id=', modelId);
            } catch {}

/app/client/src/components/OutlinerItemAttachments.svelte:48:100
Error: Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
            const eid = String((_e && (_e as any).detail && (_e as any).detail.id) ?? '');
            logger.debug('[OutlinerItemAttachments][TEST] item-attachments-changed received eid=', eid, 'selfId=', modelId);
            if (eid && String(modelId) !== eid) return;

/app/client/src/components/OutlinerItemAttachments.svelte:55:79
Error: Argument of type 'number' is not assignable to parameter of type 'undefined'. (ts)
            }
            logger.debug('[OutlinerItemAttachments][TEST] mirror updated ->', attachmentsMirror.length, 'id=', modelId);
        } catch {}

/app/client/src/components/OutlinerItem.svelte:1:9
Warn: `context="module"` is deprecated, use the `module` attribute instead
https://svelte.dev/e/script_context_deprecated (svelte)
<script context="module" lang="ts">
    // Drag start position (shared by all items)

/app/client/src/components/OutlinerItem.svelte:434:48
Warn: This reference only captures the initial value of `item`. Did you mean to reference it inside a derived instead?
https://svelte.dev/e/state_referenced_locally (svelte)
// Observe aliasTargetId Y.Map with fine granularity
let aliasTargetId = $state<string | undefined>(item.aliasTargetId);
onMount(() => {

/app/client/src/components/OutlinerItem.svelte:94:45
Error: 'this' implicitly has type 'any' because it does not have a type annotation. (ts)
                            const ap:any = (window as any).aliasPickerStore;
                            const itemId = (this as HTMLElement).getAttribute('data-item-id');
                            if (ap?.lastConfirmedItemId && String(itemId) === String(ap.lastConfirmedItemId)) {

/app/client/src/components/OutlinerItem.svelte:100:45
Error: 'this' implicitly has type 'any' because it does not have a type annotation. (ts)
                    } catch {}
                    return origGetAttr.call(this, name) as any;
                } as any;

/app/client/src/components/OutlinerItem.svelte:114:77
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[OutlinerItem] auto-open comment thread for id=", msg?: undefined): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[OutlinerItem] auto-open comment thread for id=", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
            gs.openCommentItemId = model.id;
            logger.debug('[OutlinerItem] auto-open comment thread for id=', model.id);
        }

/app/client/src/components/OutlinerItem.svelte:143:95
Error: Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
                gs.openCommentItemIndex = index;
                try { logger.debug('[OutlinerItem] auto-reopen comment thread by index, id=', model.id, 'index=', index); } catch {}
            }

/app/client/src/components/OutlinerItem.svelte:338:73
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[OutlinerItem][syncCommentCountFromItem] Error:", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[OutlinerItem][syncCommentCountFromItem] Error:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    } catch (err) {
        logger.error("[OutlinerItem][syncCommentCountFromItem] Error:", err);
    }

/app/client/src/components/OutlinerItem.svelte:775:9
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "OutlinerItem startEditing: Focus set to global textarea, activeElement:", msg?: undefined): void', gave the following error.
    Argument of type 'boolean' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "OutlinerItem startEditing: Focus set to global textarea, activeElement:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'boolean' is not assignable to parameter of type 'undefined'. (ts)
        "OutlinerItem startEditing: Focus set to global textarea, activeElement:",
        document.activeElement === textareaEl,
    );

/app/client/src/components/OutlinerItem.svelte:792:9
Error: Argument of type 'string | undefined' is not assignable to parameter of type 'undefined'.
  Type 'string' is not assignable to type 'undefined'. (ts)
        "OutlinerItem startEditing: focus called, activeElement:",
        document.activeElement?.tagName,
        document.activeElement?.className,

/app/client/src/components/OutlinerItem.svelte:974:65
Error: Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
        gs.openCommentItemIndex = null;
        try { logger.debug('[OutlinerItem] toggleComments id=', model.id, '->', false); } catch {}
    } else {

/app/client/src/components/OutlinerItem.svelte:978:65
Error: Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
        gs.openCommentItemIndex = index;
        try { logger.debug('[OutlinerItem] toggleComments id=', model.id, '->', true, 'index=', index); } catch {}
    }

/app/client/src/components/OutlinerItem.svelte:995:91
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[OutlinerItem] handleContentClick toggling comments for id=", msg?: undefined): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[OutlinerItem] handleContentClick toggling comments for id=", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'string' is not assignable to parameter of type 'undefined'. (ts)
    if (btn) {
        try { logger.debug('[OutlinerItem] handleContentClick toggling comments for id=', model.id); } catch {}
        e.stopPropagation();

/app/client/src/components/OutlinerItem.svelte:1571:61
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "OutlinerItem handleDrop: event received", msg?: undefined): void', gave the following error.
    Argument of type 'CustomEvent<any> | DragEvent' is not assignable to parameter of type 'undefined'.
      Type 'CustomEvent<any>' is not assignable to type 'undefined'.
  Overload 2 of 3, '(obj: "OutlinerItem handleDrop: event received", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'CustomEvent<any> | DragEvent' is not assignable to parameter of type 'undefined'.
      Type 'CustomEvent<any>' is not assignable to type 'undefined'. (ts)

    logger.debug("OutlinerItem handleDrop: event received", event);
    // Prevent default action

/app/client/src/components/OutlinerItem.svelte:1582:22
Error: Property 'dataTransfer' does not exist on type 'CustomEvent<any> | DragEvent'.
  Property 'dataTransfer' does not exist on type 'CustomEvent<any>'. (ts)
    // Get drop data (provide fallback for missing event.dataTransfer in Playwright isolated world)
    const dt = event.dataTransfer as DataTransfer | null;

/app/client/src/components/OutlinerItem.svelte:1621:57
Error: Argument of type 'CustomEvent<any> | DragEvent' is not assignable to parameter of type 'DragEvent'.
  Type 'CustomEvent<any>' is missing the following properties from type 'DragEvent': dataTransfer, altKey, button, buttons, and 23 more. (ts)
                        const url = await uploadAttachment(containerId, model.id, file);
                        addAttachmentToDomTargetOrModel(event, url);
                        // Reflect to Doc after connection

/app/client/src/components/OutlinerItem.svelte:1656:57
Error: Argument of type 'CustomEvent<any> | DragEvent' is not assignable to parameter of type 'DragEvent'.
  Type 'CustomEvent<any>' is missing the following properties from type 'DragEvent': dataTransfer, altKey, button, buttons, and 23 more. (ts)
                        const localUrl = URL.createObjectURL(blob);
                        addAttachmentToDomTargetOrModel(event, localUrl);
                        try { mirrorAttachment(localUrl); } catch {}

/app/client/src/components/OutlinerItem.svelte:1673:45
Error: Argument of type 'CustomEvent<any> | DragEvent' is not assignable to parameter of type 'DragEvent'.
  Type 'CustomEvent<any>' is missing the following properties from type 'DragEvent': dataTransfer, altKey, button, buttons, and 23 more. (ts)
            const localUrl = URL.createObjectURL(blob);
            addAttachmentToDomTargetOrModel(event, localUrl);

/app/client/src/components/OutlinerItem.svelte:1693:34
Error: Property 'dataTransfer' does not exist on type 'CustomEvent<any> | DragEvent'.
  Property 'dataTransfer' does not exist on type 'CustomEvent<any>'. (ts)
    try {
        const plainText = (event.dataTransfer as DataTransfer | null)?.getData?.("text/plain") ?? "";
        const selectionData = (event.dataTransfer as DataTransfer | null)?.getData?.("application/x-outliner-selection") ?? "";

/app/client/src/components/OutlinerItem.svelte:1694:38
Error: Property 'dataTransfer' does not exist on type 'CustomEvent<any> | DragEvent'.
  Property 'dataTransfer' does not exist on type 'CustomEvent<any>'. (ts)
        const plainText = (event.dataTransfer as DataTransfer | null)?.getData?.("text/plain") ?? "";
        const selectionData = (event.dataTransfer as DataTransfer | null)?.getData?.("application/x-outliner-selection") ?? "";
        const itemId = (event.dataTransfer as DataTransfer | null)?.getData?.("application/x-outliner-item") ?? "";

/app/client/src/components/OutlinerItem.svelte:1695:31
Error: Property 'dataTransfer' does not exist on type 'CustomEvent<any> | DragEvent'.
  Property 'dataTransfer' does not exist on type 'CustomEvent<any>'. (ts)
        const selectionData = (event.dataTransfer as DataTransfer | null)?.getData?.("application/x-outliner-selection") ?? "";
        const itemId = (event.dataTransfer as DataTransfer | null)?.getData?.("application/x-outliner-item") ?? "";

/app/client/src/components/OutlinerItem.svelte:1888:69
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "[doc-capture] drop captured at document", msg?: undefined): void', gave the following error.
    Argument of type '{ tag: string | undefined; class: string | undefined; }' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "[doc-capture] drop captured at document", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type '{ tag: string | undefined; class: string | undefined; }' is not assignable to parameter of type 'undefined'. (ts)
            const t = e.target as Node | null;
            logger.debug("[doc-capture] drop captured at document", { tag: (t as HTMLElement | null)?.tagName, class: (t as HTMLElement | null)?.className });
            const displayMatch = displayRef && t && (displayRef === t || displayRef.contains(t));

/app/client/src/components/OutlinerItem.svelte:1950:5
Error: Object literal may only specify known properties, and '"oncomment-count-changed"' does not exist in type 'HTMLProps<"div", HTMLAttributes<any>>'. (ts)
    onmouseup={handleMouseUp}
    oncomment-count-changed={handleCommentCountChanged}
    bind:this={itemRef}

/app/client/src/components/OutlinerBase.svelte:124:53
Error: Argument of type 'YArray<unknown>' is not assignable to parameter of type 'YArray<YMap<CommentValueType>>'.
  The types returned by 'get(...)' are incompatible between these types.
    Type 'unknown' is not assignable to type 'YMap<CommentValueType>'. (ts)
                                // Do not write to map in getter to avoid infinite loops in Observers
                                return new Comments(fallback);
                            }

/app/client/src/components/OutlinerBase.svelte:227:53
Error: Argument of type 'YArray<unknown>' is not assignable to parameter of type 'YArray<YMap<CommentValueType>>'.
  The types returned by 'get(...)' are incompatible between these types.
    Type 'unknown' is not assignable to type 'YMap<CommentValueType>'. (ts)
                                                return new Comments(
                                                    fallbackArr,
                                                );

/app/client/src/components/Sidebar.svelte:137:48
Error: Expected 2 arguments, but got 1. (ts)
                        {#each pages as page (page.id)}
                            {@const pageHref = resolve(
                                `/${encodeURIComponent(store.project?.title || "Untitled Project")}/${encodeURIComponent(page.text)}`,

/app/client/src/components/Sidebar.svelte:176:23
Error: Expected 2 arguments, but got 1. (ts)
                class="settings-link"
                href={resolve("/settings")}
                aria-current={$pageStore.url.pathname === resolve("/settings") ? "page" : undefined}

/app/client/src/components/Sidebar.svelte:177:59
Error: Expected 2 arguments, but got 1. (ts)
                href={resolve("/settings")}
                aria-current={$pageStore.url.pathname === resolve("/settings") ? "page" : undefined}
                class:active={$pageStore.url.pathname === resolve("/settings")}

/app/client/src/components/Sidebar.svelte:178:59
Error: Expected 2 arguments, but got 1. (ts)
                aria-current={$pageStore.url.pathname === resolve("/settings") ? "page" : undefined}
                class:active={$pageStore.url.pathname === resolve("/settings")}
            >

/app/client/src/components/SnapshotDiffModal.svelte:95:13
Warn: noninteractive element cannot have nonnegative tabIndex value
https://svelte.dev/e/a11y_no_noninteractive_tabindex (svelte)
            <!-- Added .diff class for backward compatibility with existing tests -->
            <div
                class="diff diff-view flex-1 overflow-auto bg-gray-50 p-3 rounded border border-gray-200 font-mono text-sm"
                tabindex="0"
                role="region"
                aria-label="Diff content"
            >
                {#if diffHtml}
                    <!-- XSS-safe: diffHtml is generated by trusted diff-match-patch library -->
                    <!-- eslint-disable-next-line svelte/no-at-html-tags -->
                    {@html diffHtml}
                {:else}
                    <div class="flex items-center justify-center h-full text-gray-400 italic">
                        Select a snapshot to view differences
                    </div>
                {/if}
            </div>
        </div>

/app/client/src/routes/+layout.svelte:117:63
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "An error occurred during log rotation", msg?: undefined): void', gave the following error.
    Argument of type '{ error: unknown; }' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "An error occurred during log rotation", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type '{ error: unknown; }' is not assignable to parameter of type 'undefined'. (ts)
    catch (error) {
        logger.error("An error occurred during log rotation", {
            error,
        });
    }

/app/client/src/routes/+layout.svelte:173:64
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Failed to load client-only modules", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Failed to load client-only modules", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
        } catch (e) {
            logger.error("Failed to load client-only modules", e);
        }

/app/client/src/routes/+layout.svelte:208:39
Error: Expected 0 arguments, but got 1. (ts)
            // Initialize debug functions
            setupGlobalDebugFunctions(yjsService?.yjsHighService);
        }

/app/client/src/routes/+layout.svelte:215:47
Error: Expected 0 arguments, but got 1. (ts)
                if (isAuthenticated && browser) {
                    setupGlobalDebugFunctions(yjsService?.yjsHighService);
                }

/app/client/src/routes/+layout.svelte:262:21
Error: Unused '@ts-expect-error' directive. (ts)
                    // Patch both EventTarget and Element to maximize coverage
                    // @ts-expect-error - Need to patch prototype for E2E drag/drop testing
                    EventTarget.prototype.dispatchEvent = function(event: Event): boolean { return wrap.call(this, origDispatchEventTarget, event); };

/app/client/src/routes/+layout.svelte:307:71
Error: 'this' implicitly has type 'any' because it does not have a type annotation. (ts)
                                                    try { if (data instanceof File) anyWin.__E2E_LAST_FILES__.push(data); } catch {}
                                                    return orig.apply(this, [data, _type]);
                                                } as any;

/app/client/src/routes/+layout.svelte:332:33
Error: Unused '@ts-expect-error' directive. (ts)
                                });
                                // @ts-expect-error - Need to replace window.File for E2E attachment testing
                                (window as any).File = Wrapped;

/app/client/src/routes/+layout.svelte:352:74
Error: 'this' implicitly has type 'any' because it does not have a type annotation. (ts)
                                                    try { console.log('[E2E] DT(instance).items.add called'); } catch {}
                                                    return origAdd.apply(this, [data, _type]);
                                                } as any;

/app/client/src/routes/+layout.svelte:360:33
Error: Unused '@ts-expect-error' directive. (ts)
                                });
                                // @ts-expect-error - Need to replace window.DataTransfer for E2E drag/drop testing
                                (window as any).DataTransfer = WrappedDT;

/app/client/src/routes/[project]/+layout.svelte:25:38
Error: Property 'params' does not exist on type 'Readable<Page<Record<string, string>, string | null>>'. (ts)
    // Prefer explicit param over optional data prop
    const projectParam = (pageStore?.params?.project as string) || (data as any)?.project;
    if (!projectParam) return;

/app/client/src/routes/[project]/+layout.svelte:56:46
Error: Property 'params' does not exist on type 'Readable<Page<Record<string, string>, string | null>>'. (ts)
            // If project not yet loaded but param exists, try again when auth flips
            const projectParam = (pageStore?.params?.project as string) || (data as any)?.project;
            if (projectParam && !yjsStore.yjsClient) {

/app/client/src/routes/[project]/+page.svelte:149:21
Error: Type 'Items | undefined' is not assignable to type 'Items'.
  Type 'undefined' is not assignable to type 'Items'. (ts)
                    project={store.project!}
                    rootItems={pages}
                    onPageSelected={handlePageSelected}

/app/client/src/routes/[project]/[page]/diff/+page.svelte:34:5
Error: Cannot use 'bind:' with this property. It is declared as non-bindable inside the component.
To mark a property as bindable: 'let { currentContent = $bindable() } = $props()' (ts)
    page={pageTitle}
    bind:currentContent={content}
    author={user}

/app/client/src/routes/[project]/[page]/schedule/+page.svelte:72:28
Error: 'store.project.items.length' is possibly 'undefined'. (ts)
    const isCorrectProject = currentProjectTitle === project;
    const hasProjectData = store.project?.items?.length > 0 && isCorrectProject;

/app/client/src/routes/[project]/[page]/schedule/+page.svelte:101:35
Error: Object literal may only specify known properties, and 'waitUntil' does not exist in type '{ replaceState?: boolean | undefined; noScroll?: boolean | undefined; keepFocus?: boolean | undefined; invalidateAll?: boolean | undefined; invalidate?: (string | URL | ((url: URL) => boolean))[] | undefined; state?: PageState | undefined; }'. (ts)
        console.log("Schedule page: Navigating to main page:", mainPageUrl);
        await goto(mainPageUrl, { waitUntil: "networkidle" });
        console.log("Schedule page: Back from main page, waiting for store.project to be populated...");

/app/client/src/routes/[project]/[page]/schedule/+page.svelte:106:17
Error: 'store.project.items.length' is possibly 'undefined'. (ts)
        for (let i = 0; i < 50; i++) {
            if (store.project?.items?.length > 0) {
                console.log("Schedule page: store.project populated after", i * 100, "ms");

/app/client/src/routes/[project]/[page]/schedule/+page.svelte:117:35
Error: Object literal may only specify known properties, and 'waitUntil' does not exist in type '{ replaceState?: boolean | undefined; noScroll?: boolean | undefined; keepFocus?: boolean | undefined; invalidateAll?: boolean | undefined; invalidate?: (string | URL | ((url: URL) => boolean))[] | undefined; state?: PageState | undefined; }'. (ts)
        console.log("Schedule page: Navigating back to schedule:", scheduleUrl);
        await goto(scheduleUrl, { waitUntil: "networkidle" });
        console.log("Schedule page: Back on schedule page, store.project?.items?.length =", store.project?.items?.length ?? 0);

/app/client/src/routes/[project]/[page]/schedule/+page.svelte:551:16
Error: Expected 2 arguments, but got 1. (ts)
async function back() {
    await goto(resolve(`/${project}/${pageTitle}`));
}

/app/client/src/routes/[project]/graph/+page.svelte:10:16
Error: Expected 2 arguments, but got 1. (ts)
async function goBack() {
    await goto(resolve(`/${projectName}`));
}

/app/client/src/routes/[project]/settings/+page.svelte:259:63
Error: Argument of type 'string | undefined' is not assignable to parameter of type 'string | number | boolean'.
  Type 'undefined' is not assignable to type 'string | number | boolean'. (ts)
                if (pageName) {
                    const encodedProject = encodeURIComponent(projectName);
                    const encodedPage = encodeURIComponent(pageName);

/app/client/src/routes/demo/paraglide/+page.svelte:12:45
Error: Property 'url' does not exist on type 'Readable<Page<Record<string, string>, string | null>>'. (ts)
function switchToLanguage(newLanguage: string) {
    const localisedPath = localizeHref(page.url.pathname, { locale: newLanguage });
    goto(localisedPath);

/app/client/src/routes/min/+page.svelte:58:38
Error: No overload matches this call.
  Overload 1 of 2, '(input: string | Request | URL, init?: RequestInit | undefined): Promise<Response>', gave the following error.
    Argument of type 'string | undefined' is not assignable to parameter of type 'string | Request | URL'.
      Type 'undefined' is not assignable to type 'string | Request | URL'.
  Overload 2 of 2, '(input: URL | RequestInfo, init?: RequestInit | undefined): Promise<Response>', gave the following error.
    Argument of type 'string | undefined' is not assignable to parameter of type 'URL | RequestInfo'.
      Type 'undefined' is not assignable to type 'URL | RequestInfo'. (ts)
        const verifyUrl = import.meta.env.VITE_TOKEN_VERIFY_URL;
        const response = await fetch(verifyUrl, {
            method: "POST",

/app/client/src/routes/projects/new/+page.svelte:25:34
Error: Parameter 'authResult' implicitly has an 'any' type. (ts)
// Handle successful authentication
async function handleAuthSuccess(authResult) {
    logger.info("Authentication success:", authResult);

/app/client/src/routes/projects/new/+page.svelte:75:54
Error: No overload matches this call.
  Overload 1 of 3, '(obj: "Error creating new outliner:", msg?: undefined): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
  Overload 2 of 3, '(obj: "Error creating new outliner:", msg?: undefined, ...args: unknown[]): void', gave the following error.
    Argument of type 'unknown' is not assignable to parameter of type 'undefined'. (ts)
    catch (err) {
        logger.error("Error creating new outliner:", err);
        error = err instanceof Error

/app/client/src/tests/unit/yjs/YjsClient.spec.ts:41:20
Error: Expected 1 arguments, but got 0.
        const { HocuspocusProvider } = await import("@hocuspocus/provider");
        provider = new HocuspocusProvider();

/app/client/src/tests/unit/yjs/YjsClient.spec.ts:79:16
Error: 'info.provider' is possibly 'null'.
        expect(info.provider).toBeDefined();
        expect(info.provider.url).toBe("ws://mock-url");
        expect(info.provider.name).toBe("mock-provider");

/app/client/src/tests/unit/yjs/YjsClient.spec.ts:80:16
Error: 'info.provider' is possibly 'null'.
        expect(info.provider.url).toBe("ws://mock-url");
        expect(info.provider.name).toBe("mock-provider");
        expect(info.provider.connected).toBe(true);

/app/client/src/tests/unit/yjs/YjsClient.spec.ts:81:16
Error: 'info.provider' is possibly 'null'.
        expect(info.provider.name).toBe("mock-provider");
        expect(info.provider.connected).toBe(true);
    });

====================================
svelte-check found 132 errors and 8 warnings in 32 files
ELIFECYCLE Command failed with exit code 1.
