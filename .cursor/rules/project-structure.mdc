---
description: 
globs: 
alwaysApply: true
---
ğŸš€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: Fluid Outliner (Monorepo)
ç›®çš„/èƒŒæ™¯: 
éšå±¤å‹ãƒãƒ¼ãƒˆ(ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼)ã‚’è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±åŒç·¨é›†ã§ãã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã™ã‚‹ã€‚
Fluid Framework ã‚’ç”¨ã„ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸã‚„ã€Google/Firebase èªè¨¼ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã„ã‚„ã™ã•ã¨æ‹¡å¼µæ€§ã‚’ä¸¡ç«‹ã€‚
ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½: 
ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã®éšå±¤è¡¨ç¤ºãƒ»ç·¨é›†(ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ/ã‚¢ã‚¦ãƒˆãƒ‡ãƒ³ãƒˆ)
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±åŒç·¨é›†(è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚«ãƒ¼ã‚½ãƒ«&é¸æŠç¯„å›²è¡¨ç¤º)
Google/Firebase èªè¨¼ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³ç®¡ç†
ãƒšãƒ¼ã‚¸(ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)ã®ä½œæˆãƒ»åˆ‡ã‚Šæ›¿ãˆ
ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ(Vitest)&E2E ãƒ†ã‚¹ãƒˆ(Playwright)
ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: 
SvelteKit 2 + Svelte 5 + TypeScript
Runes(çŠ¶æ…‹ç®¡ç†/svelte/store ã¯æœªä½¿ç”¨)
Tailwind CSS
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: 
Node.js + Express
Firebase Admin(èªè¨¼æƒ…å ±/ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†)
JSON Web Token(ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†)
Pino(ãƒ­ã‚°å‡ºåŠ›)
@fluidframework/azure-client, @fluidframework/azure-service-utils(Azure Fluid Service çµ±åˆ)
ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢: 
Firebase Firestore(ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¡ã‚¿ç®¡ç†)
ãƒ“ãƒ«ãƒ‰/ãƒãƒ³ãƒ‰ãƒ©ãƒ¼: Vite + SvelteKit
ãƒ†ã‚¹ãƒˆ: Vitest(å˜ä½“)+ Playwright(E2E)
CI/CD: GitLab CI(.gitlab-ci.yml+.gitlab-ci-local)
é–‹ç™ºç’°å¢ƒ: VSCode Dev Container(.devcontainer)
ãƒ†ã‚¹ãƒˆç”¨ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿: 
@fluidframework/tinylicious-client(ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ Tinylicious)
Firebase Emulator

ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
/(ãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆ)
â”œ .devcontainer/                # VSCode Dev Container è¨­å®š
â”œ .github/                      # GitHub Actions ç­‰(ãƒ¢ãƒãƒ¬ãƒå…±é€š)
â”œ client/                       # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒª (SvelteKit)
â”‚  â”œ src/
â”‚  â”‚  â”œ routes/                 # +page.svelte ãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚  â”‚  â”œ components/             # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (OutlinerBase, OutlinerTree, OutlinerItem)
â”‚  â”‚  â”œ stores/                 # Runes ã‚¹ãƒˆã‚¢ (OutlinerViewModel, firestoreStore)
â”‚  â”‚  â”œ lib/                    # API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»å‹å®šç¾©
â”‚  â”‚  â”œ utils/                  # è£œåŠ©é–¢æ•°
â”‚  â”‚  â”œ types/                  # TypeScript å‹å®šç¾©
â”‚  â”‚  â”” schema/                 # ã‚¹ã‚­ãƒ¼ãƒå®šç¾© (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
â”‚  â”œ static/                    # é™çš„ãƒªã‚½ãƒ¼ã‚¹
â”‚  â”œ package.json
â”‚  â”œ svelte.config.js
â”‚  â”œ vite.config.ts
â”‚  â”œ tailwind.config.js
â”‚  â”œ playwright.config.ts
â”‚  â”” vitest-setup-client.ts
â”œ server/                       # èªè¨¼ã‚µãƒ¼ãƒãƒ¼ (Express)
â”‚  â”œ auth-service.js            # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚  â”œ utils/                     # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (create-test-user.js ãªã©)
â”‚  â”œ package.json
â”‚  â”” firebase-adminsdk.json     # Firebase ç®¡ç†ç”¨ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«
â”œ docs/                         # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œ .gitignore
â”œ .pre-commit-config.yaml
â”œ .gitlab-ci.yml
â”” README.md

ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ & çŠ¶æ…‹ç®¡ç†
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ Svelte ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ UI ã‚¤ãƒ™ãƒ³ãƒˆç™ºç« â†’ Fluid SharedTree ã®æ›´æ–° â†’ 
Fluid ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒè‡ªå‹•çš„ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸ â†’ ãƒ‡ãƒ¼ã‚¿å—ä¿¡ãƒ»æ›´æ–° â†’ 
å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’ Runes ã‚¹ãƒˆã‚¢ã«æ ¼ç´ â†’ å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè‡ªå‹•ã§å†æç”»
èªè¨¼æ“ä½œã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§Firebaseãƒ­ã‚°ã‚¤ãƒ³ â†’ client/src/auth/UserManager.ts â†’ ã‚µãƒ¼ãƒãƒ¼ (server/auth-service.js) ã¸ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ 
ã‚µãƒ¼ãƒãƒ¼å´ã§Firebase Admin é€£æº â†’ Fluidç”¨JWT ç™ºè¡Œ â†’ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§Fluidãƒ­ã‚°ã‚¤ãƒ³

ğŸ§© ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§
| ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | å½¹å‰² |
| ------------------------------------------------------- | ------------------------------------- |
| client/src/components/OutlinerBase.svelte | ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼å…¨ä½“ã‚’ãƒ©ãƒƒãƒ— |
| client/src/components/OutlinerTree.svelte | éšå±¤ãƒ„ãƒªãƒ¼ã®æç”»&æ“ä½œ |
| client/src/components/OutlinerItem.svelte | å€‹ã€…ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚¢ã‚¤ãƒ†ãƒ  |
| client/src/components/GlobalTextArea.svelte | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã‚’å—ã‘ã‚‹éš ã—ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ |
| client/src/stores/OutlinerViewModel.ts | ãƒ“ãƒ¥ãƒ¼ç”¨ãƒ¢ãƒ‡ãƒ«(éšå±¤ãƒ‡ãƒ¼ã‚¿&æ“ä½œãƒ­ã‚¸ãƒƒã‚¯) |
| client/src/stores/firestoreStore.ts | Firebase Firestore ç”¨ Rune ã‚¹ãƒˆã‚¢ |
| client/src/auth/UserManager.ts | ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç† |
| server/auth-service.js | èªè¨¼ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ |

âš™ï¸ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
TypeScript: tsconfig.json
ESLint: eslint.config.js / .eslintignore
Tailwind CSS: tailwind.config.js
Vite / SvelteKit: vite.config.ts / svelte.config.js
Playwright: playwright.config.ts
Vitest: vitest-setup-client.ts
CI: .gitlab-ci.yml / .gitlab-ci-local
